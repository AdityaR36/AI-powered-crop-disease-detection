 import React, { useState, useEffect, useRef } from 'react';
import { 
  Upload, 
  Camera, 
  Scan, 
  CheckCircle, 
  AlertTriangle, 
  Leaf, 
  Info, 
  X, 
  ChevronRight, 
  Droplets, 
  Sun, 
  Wind,
  ShieldCheck,
  Activity,
  ArrowLeft,
  Download,
  BookOpen,
  RefreshCw,
  FileText,
  Image as ImageIcon,
  MoreVertical,
  Sprout,
  Stethoscope,
  MessageCircle,
  Send,
  Bot,
  Globe,
  Mic, 
  MicOff, 
  MapPin, 
  CloudRain, 
  HeartHandshake, 
  Loader2,
  Navigation,
  Settings,
  Edit3,
  Check,
  Map as MapIcon,
  ExternalLink,
  Thermometer,
  Cloud,
  Crosshair,
  Search,
  Beaker,
  MessageSquare,
  User,
  Phone,
  Store,
  UserPlus,
  Plus,
  WifiOff,
  ChevronDown
} from 'lucide-react';

const apiKey = ""; // API Key injected by environment

// --- Mock Data ---
const NEARBY_SPECIALISTS = [
  { id: 1, name: "Dr. R. Singh", role: "Agronomist", distance: "2.5 km", phone: "9876543210" },
  { id: 2, name: "Kisan Seva Kendra", role: "Support Center", distance: "4.0 km", phone: "1800123456" },
  { id: 3, name: "Priya Patel", role: "Plant Pathologist", distance: "8.2 km", phone: "9988776655" },
  { id: 4, name: "Village Co-op", role: "General Support", distance: "1.5 km", phone: "9812345678" }
];

const SEASONAL_CROPS = {
  summer: [
    { name: { en: "Watermelon", hi: "рддрд░рдмреВрдЬ", ta: "родро░рпНрокрпВроЪрогро┐" }, icon: "ЁЯНЙ" },
    { name: { en: "Cucumber", hi: "рдЦреАрд░рд╛", ta: "ро╡рпЖро│рпНро│ро░ро┐" }, icon: "ЁЯеТ" },
    { name: { en: "Cotton", hi: "рдХрдкрд╛рд╕", ta: "рокро░рпБродрпНродро┐" }, icon: "тШБя╕П" }
  ],
  monsoon: [
    { name: { en: "Rice", hi: "рдЪрд╛рд╡рд▓", ta: "роЕро░ро┐роЪро┐" }, icon: "ЁЯМ╛" },
    { name: { en: "Maize", hi: "рдордХреНрдХрд╛", ta: "роЪрпЛро│роорпН" }, icon: "ЁЯМ╜" },
    { name: { en: "Soybean", hi: "рд╕реЛрдпрд╛рдмреАрди", ta: "роЪрпЛропро╛рокрпАройрпН" }, icon: "ЁЯМ▒" }
  ],
  winter: [
    { name: { en: "Wheat", hi: "рдЧреЗрд╣реВрдВ", ta: "роХрпЛродрпБроорпИ" }, icon: "ЁЯМ╛" },
    { name: { en: "Mustard", hi: "рд╕рд░рд╕реЛрдВ", ta: "роХроЯрпБроХрпБ" }, icon: "ЁЯМ╝" },
    { name: { en: "Chickpea", hi: "рдЪрдирд╛", ta: "роХрпКрогрпНроЯрпИроХрпНроХроЯро▓рпИ" }, icon: "ЁЯЯд" }
  ]
};

const getDiseaseDB = (lang) => [
  {
    id: 'healthy',
    name: lang === 'hi' ? 'рд╕реНрд╡рд╕реНрде рдкреМрдзрд╛' : lang === 'ta' ? 'роЖро░рпЛроХрпНроХро┐ропрооро╛рой родро╛ро╡ро░роорпН' : 'Healthy Plant',
    status: 'healthy',
    confidence: 98.5,
    description: lang === 'hi' 
      ? 'рдЖрдкрдХрд╛ рдкреМрдзрд╛ рдЬреЛрд░рджрд╛рд░ рдФрд░ рд╕реНрд╡рд╕реНрде рджрд┐рдЦрддрд╛ рд╣реИред рдХреЛрдИ рд░реЛрдЧрдЬрдирдХ рдпрд╛ рдкреЛрд╖рдХ рддрддреНрд╡реЛрдВ рдХреА рдХрдореА рдирд╣реАрдВ рдкрд╛рдИ рдЧрдИред'
      : lang === 'ta'
      ? 'роЙроЩрпНроХро│рпН родро╛ро╡ро░роорпН роЖро░рпЛроХрпНроХро┐ропрооро╛роХродрпН родрпЖро░ро┐роХро┐ро▒родрпБ. роирпЛропрпНроХрпНроХро┐ро░рпБрооро┐роХро│рпН роЕро▓рпНро▓родрпБ роКроЯрпНроЯроЪрпНроЪродрпНродрпБ роХрпБро▒рпИрокро╛роЯрпБроХро│рпН роОродрпБро╡рпБроорпН роХрогрпНроЯро▒ро┐ропрокрпНрокроЯро╡ро┐ро▓рпНро▓рпИ.'
      : 'Your plant looks vigorous and healthy. No signs of pathogens or nutrient deficiencies found.',
    symptoms: lang === 'hi' 
      ? ['рдЪрдордХрджрд╛рд░ рд╣рд░реА рдкрддреНрддрд┐рдпрд╛рдВ', 'рдордЬрдмреВрдд рддрдиреЗ', 'рдХреЛрдИ рдорд▓рд┐рдирдХрд┐рд░рдг рдирд╣реАрдВ']
      : lang === 'ta'
      ? ['родрпБроЯро┐рокрпНрокро╛рой рокроЪрпНроЪрпИ роЗро▓рпИроХро│рпН', 'ро╡ро▓рпБро╡ро╛рой родрогрпНроЯрпБроХро│рпН', 'роиро┐ро▒рооро╛ро▒рпНро▒роорпН роЗро▓рпНро▓рпИ']
      : ['Vibrant green leaves', 'Strong stems', 'No discoloration'],
    treatment: lang === 'hi'
      ? ['рдирд┐рдпрдорд┐рдд рд░реВрдк рд╕реЗ рдкрд╛рдиреА рджреЗрдирд╛ рдЬрд╛рд░реА рд░рдЦреЗрдВред', 'рд╡рд░реНрддрдорд╛рди рдзреВрдк рдХреЗ рд╕рдВрдкрд░реНрдХ рдХреЛ рдмрдирд╛рдП рд░рдЦреЗрдВред', 'рд╣рдореЗрд╢рд╛ рдХреА рддрд░рд╣ рдХреАрдЯреЛрдВ рдХреА рдирд┐рдЧрд░рд╛рдиреА рдХрд░реЗрдВред']
      : lang === 'ta'
      ? ['ро╡ро┤роХрпНроХрооро╛рой роирпАро░рпНрокрпНрокро╛роЪрой роЕроЯрпНроЯро╡рогрпИропрпИродрпН родрпКроЯро░ро╡рпБроорпН.', 'роЪрпВро░ро┐роп роТро│ро┐ропрпИрокрпН рокро░ро╛рооро░ро┐роХрпНроХро╡рпБроорпН.', 'ро╡ро┤роХрпНроХроорпН рокрпЛро▓рпН рокрпВроЪрпНроЪро┐роХро│рпИроХрпН роХрогрпНроХро╛рогро┐роХрпНроХро╡рпБроорпН.']
      : ['Continue regular watering schedule.', 'Maintain current sunlight exposure.', 'Monitor for pests as usual.'],
    icon: <CheckCircle className="w-12 h-12 text-emerald-500" />
  },
  {
    id: 'early_blight',
    name: lang === 'hi' ? 'рдЕрд░реНрд▓реА рдмреНрд▓рд╛рдЗрдЯ (рдЭреБрд▓рд╕рд╛ рд░реЛрдЧ)' : lang === 'ta' ? 'роЖро░роорпНрок рокрпНро│рпИроЯрпН' : 'Early Blight',
    status: 'disease',
    confidence: 89.2,
    description: lang === 'hi'
      ? 'рдЯрдорд╛рдЯрд░ рдФрд░ рдЖрд▓реВ рдХреЛ рдкреНрд░рднрд╛рд╡рд┐рдд рдХрд░рдиреЗ рд╡рд╛рд▓рд╛ рдПрдХ рд╕рд╛рдорд╛рдиреНрдп рдХрд╡рдХ рд░реЛрдЧред рдпрд╣ рдкрддреНрддрд┐рдпреЛрдВ рдкрд░ рд╕рдВрдХреЗрдВрджреНрд░рд┐рдд рдЫрд▓реНрд▓реЗ рдХрд╛ рдХрд╛рд░рдг рдмрдирддрд╛ рд╣реИред'
      : lang === 'ta'
      ? 'родроХрпНроХро╛ро│ро┐ рооро▒рпНро▒рпБроорпН роЙро░рпБро│рпИроХрпНроХро┐ро┤роЩрпНроХрпИ рокро╛родро┐роХрпНроХрпБроорпН роТро░рпБ рокрпКродрпБро╡ро╛рой рокрпВроЮрпНроЪрпИ роирпЛропрпН. роЗродрпБ роЗро▓рпИроХро│ро┐ро▓рпН ро╡ро│рпИропроЩрпНроХро│рпИ роПро▒рпНрокроЯрпБродрпНродрпБроХро┐ро▒родрпБ.'
      : 'A common fungal disease affecting tomatoes and potatoes. It causes concentric rings on leaves.',
    symptoms: lang === 'hi'
      ? ['рд╕рдВрдХреЗрдВрджреНрд░рд┐рдд рдЫрд▓реНрд▓реЛрдВ рдХреЗ рд╕рд╛рде рдЧрд╣рд░реЗ рднреВрд░реЗ рд░рдВрдЧ рдХреЗ рдзрдмреНрдмреЗ', 'рдирд┐рдЪрд▓реА рдкрддреНрддрд┐рдпреЛрдВ рдХрд╛ рдкреАрд▓рд╛ рдкрдбрд╝рдирд╛', 'рддрдиреЗ рдХреЗ рдирд╛рд╕реВрд░']
      : lang === 'ta'
      ? ['роЗро▓рпИроХро│ро┐ро▓рпН роЕроЯро░рпН рокро┤рпБрокрпНрокрпБ роиро┐ро▒ рокрпБро│рпНро│ро┐роХро│рпН', 'роХрпАро┤рпН роЗро▓рпИроХро│рпН роороЮрпНроЪро│рпН роиро┐ро▒рооро╛роХ рооро╛ро▒рпБродро▓рпН', 'родрогрпНроЯрпБ рокрпБрогрпНроХро│рпН']
      : ['Dark brown spots with concentric rings', 'Yellowing of lower leaves', 'Stem cankers'],
    treatment: lang === 'hi'
      ? ['рд╕рдВрдХреНрд░рдорд┐рдд рдирд┐рдЪрд▓реА рдкрддреНрддрд┐рдпреЛрдВ рдХреЛ рд╣рдЯрд╛ рджреЗрдВред', 'рддрд╛рдВрдмреЗ рдЖрдзрд╛рд░рд┐рдд рдХрд╡рдХрдирд╛рд╢реА рдХрд╛ рдкреНрд░рдпреЛрдЧ рдХрд░реЗрдВред', 'рдкреМрдзреЗ рдХреЗ рдЪрд╛рд░реЛрдВ рдУрд░ рдЕрдЪреНрдЫреА рд╣рд╡рд╛ рдХрд╛ рд╕рдВрдЪрд╛рд░ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВред', 'рдКрдкрд░ рд╕реЗ рдкрд╛рдиреА рджреЗрдиреЗ рд╕реЗ рдмрдЪреЗрдВред']
      : lang === 'ta'
      ? ['рокро╛родро┐роХрпНроХрокрпНрокроЯрпНроЯ роХрпАро┤рпН роЗро▓рпИроХро│рпИ роЕроХро▒рпНро▒ро╡рпБроорпН.', 'роЪрпЖрокрпНрокрпБ роЕроЯро┐рокрпНрокроЯрпИропро┐ро▓ро╛рой рокрпВроЮрпНроЪрпИроХрпН роХрпКро▓рпНро▓ро┐роХро│рпИрокрпН рокропройрпНрокроЯрпБродрпНродрпБроЩрпНроХро│рпН.', 'родро╛ро╡ро░родрпНродрпИроЪрпН роЪрпБро▒рпНро▒ро┐ роиро▓рпНро▓ роХро╛ро▒рпНро▒рпБ роЪрпБро┤ро▒рпНроЪро┐ропрпИ роЙро▒рпБродро┐ роЪрпЖропрпНропрпБроЩрпНроХро│рпН.']
      : ['Remove infected lower leaves.', 'Apply copper-based fungicides.', 'Ensure good air circulation around the plant.', 'Avoid overhead watering.'],
    icon: <AlertTriangle className="w-12 h-12 text-amber-500" />
  },
  {
    id: 'powdery_mildew',
    name: lang === 'hi' ? 'рдкрд╛рдЙрдбрд░реА рдорд┐рд▓рдбреНрдпреВ (рдЪреВрд░реНрдгреА рдлрдлреВрдБрдж)' : lang === 'ta' ? 'роирпБрогрпНродрпБроХро│рпН рокрпВроЮрпНроЪрпИ роХро╛ро│ро╛ройрпН' : 'Powdery Mildew',
    status: 'disease',
    confidence: 92.1,
    description: lang === 'hi'
      ? 'рдПрдХ рдХрд╡рдХ рд░реЛрдЧ рдЬреЛ рдкрддреНрддрд┐рдпреЛрдВ рдФрд░ рддрдиреЛрдВ рдкрд░ рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╕рдлреЗрдж рдкрд╛рдЙрдбрд░ рдЬреИрд╕рд╛ рд╡рд┐рдХрд╛рд╕ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рддрд╛ рд╣реИред'
      : lang === 'ta'
      ? 'роЗро▓рпИроХро│рпН рооро▒рпНро▒рпБроорпН родрогрпНроЯрпБроХро│ро┐ро▓рпН роТро░рпБ родройро┐родрпНродрпБро╡рооро╛рой ро╡рпЖро│рпНро│рпИ родрпВро│рпН ро╡ро│ро░рпНроЪрпНроЪро┐ропрпИроХрпН роХро╛роЯрпНроЯрпБроорпН роТро░рпБ рокрпВроЮрпНроЪрпИ роирпЛропрпН.'
      : 'A fungal disease that displays a distinctive white powdery growth on leaves and stems.',
    symptoms: lang === 'hi'
      ? ['рд╕рдлреЗрдж рдкрд╛рдЙрдбрд░ рдХреЗ рдзрдмреНрдмреЗ', 'рдкрддреНрддрд┐рдпреЛрдВ рдХрд╛ рдореБрдбрд╝рдирд╛', 'рд░реБрдХрд╛ рд╣реБрдЖ рд╡рд┐рдХрд╛рд╕']
      : lang === 'ta'
      ? ['ро╡рпЖро│рпНро│рпИ родрпВро│рпН рокрпБро│рпНро│ро┐роХро│рпН', 'роЗро▓рпИ роЪрпБро░рпБроЯрпНроЯрпБродро▓рпН', 'ро╡ро│ро░рпНроЪрпНроЪро┐ роХрпБройрпНро▒ро┐ропродрпБ']
      : ['White powdery spots', 'Leaf curling or twisting', 'Stunted growth'],
    treatment: lang === 'hi'
      ? ['рдиреАрдо рдХрд╛ рддреЗрд▓ рдпрд╛ рд╕рд▓реНрдлрд░ рдХрд╡рдХрдирд╛рд╢реА рд▓рдЧрд╛рдПрдВред', 'рдЧрдВрднреАрд░ рд░реВрдк рд╕реЗ рд╕рдВрдХреНрд░рдорд┐рдд рднрд╛рдЧреЛрдВ рдХреЛ рд╣рдЯрд╛ рджреЗрдВред', 'рдкрддреНрддрд┐рдпреЛрдВ рдкрд░ рдирд╣реАрдВ, рдмрд▓реНрдХрд┐ рдЬрдбрд╝ рдореЗрдВ рдкрд╛рдиреА рджреЗрдВред', 'рдзреВрдк рдХрд╛ рд╕рдВрдкрд░реНрдХ рдмрдврд╝рд╛рдПрдБред']
      : lang === 'ta'
      ? ['ро╡рпЗрокрпНрок роОрогрпНрогрпЖропрпН роЕро▓рпНро▓родрпБ роЪро▓рпНрокро░рпН рокрпВроЮрпНроЪрпИроХрпН роХрпКро▓рпНро▓ро┐роХро│рпИрокрпН рокропройрпНрокроЯрпБродрпНродрпБроЩрпНроХро│рпН.', 'рокрпЖро░ро┐родрпБроорпН рокро╛родро┐роХрпНроХрокрпНрокроЯрпНроЯ рокроХрпБродро┐роХро│рпИ роЕроХро▒рпНро▒ро╡рпБроорпН.', 'роЪрпВро░ро┐роп роТро│ро┐ропрпИ роЕродро┐роХро░ро┐роХрпНроХро╡рпБроорпН.']
      : ['Apply neem oil or sulfur fungicides.', 'Remove severely infected parts.', 'Water at the base, not on leaves.', 'Increase sunlight exposure.'],
    icon: <Wind className="w-12 h-12 text-stone-400" />
  },
  {
    id: 'late_blight',
    name: lang === 'hi' ? 'рд▓реЗрдЯ рдмреНрд▓рд╛рдЗрдЯ (рдкрдЫреЗрддреА рдЭреБрд▓рд╕рд╛)' : lang === 'ta' ? 'ро▓рпЗроЯрпН рокрпНро│рпИроЯрпН' : 'Late Blight',
    status: 'critical',
    confidence: 85.7,
    description: lang === 'hi'
      ? 'рдПрдХ рдЧрдВрднреАрд░ рдмреАрдорд╛рд░реА рдЬреЛ рдлрд╕рд▓реЛрдВ рдХреЛ рддреЗрдЬреА рд╕реЗ рдирд╖реНрдЯ рдХрд░ рд╕рдХрддреА рд╣реИред рдпрд╣ рдмрдбрд╝реЗ, рдЧрд╣рд░реЗ рдкрд╛рдиреА рд╕реЗ рд▓рдердкрде рдзрдмреНрдмреЛрдВ рдХреЗ рд░реВрдк рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗрддрд╛ рд╣реИред'
      : lang === 'ta'
      ? 'рокропро┐ро░рпНроХро│рпИ ро╡ро┐ро░рпИро╡ро╛роХ роЕро┤ро┐роХрпНроХрпБроорпН роТро░рпБ родрпАро╡ро┐ро░ роирпЛропрпН. роЗродрпБ рокрпЖро░ро┐роп, роЗро░рпБрогрпНроЯ роирпАро░рпН роиройрпИроирпНрод рокрпБро│рпНро│ро┐роХро│ро╛роХродрпН родрпЛройрпНро▒рпБроХро┐ро▒родрпБ.'
      : 'A serious disease that can destroy crops rapidly. It appears as large, dark water-soaked spots.',
    symptoms: lang === 'hi'
      ? ['рдкрддреНрддрд┐рдпреЛрдВ рдкрд░ рдмрдбрд╝реЗ рднреВрд░реЗ рд░рдВрдЧ рдХреЗ рдзрдмреНрдмреЗ', 'рдиреАрдЪреЗ рдХреА рддрд░рдл рд╕рдлреЗрдж рдХрд╡рдХ рд╡реГрджреНрдзрд┐', 'рдлрд▓реЛрдВ/рдХрдВрджреЛрдВ рдХрд╛ рд╕рдбрд╝рдирд╛']
      : lang === 'ta'
      ? ['роЗро▓рпИроХро│ро┐ро▓рпН рокрпЖро░ро┐роп рокро┤рпБрокрпНрокрпБ роиро┐ро▒ роХро▒рпИроХро│рпН', 'роЕроЯро┐рокрпНрокроХрпБродро┐роХро│ро┐ро▓рпН ро╡рпЖро│рпНро│рпИ рокрпВроЮрпНроЪрпИ ро╡ро│ро░рпНроЪрпНроЪро┐', 'роЕро┤рпБроХрпБроорпН рокро┤роорпН/роХро┐ро┤роЩрпНроХрпБроХро│рпН']
      : ['Large brown blotches on leaves', 'White fungal growth on undersides', 'Rotting fruit/tubers'],
    treatment: lang === 'hi'
      ? ['рд╕рдВрдХреНрд░рдорд┐рдд рдкреМрдзреЛрдВ рдХреЛ рддреБрд░рдВрдд рдирд╖реНрдЯ рдХрд░реЗрдВ (рдЦрд╛рдж рди рдмрдирд╛рдПрдВ)ред', 'рдирд┐рд╡рд╛рд░рдХ рдХрд╡рдХрдирд╛рд╢реА рд▓рд╛рдЧреВ рдХрд░реЗрдВред', 'рдЕрдЧрд▓реЗ рд╕реАрдЬрди рдореЗрдВ рдкреНрд░рддрд┐рд░реЛрдзреА рдХрд┐рд╕реНрдореЗрдВ рд▓рдЧрд╛рдПрдВред']
      : lang === 'ta'
      ? ['рокро╛родро┐роХрпНроХрокрпНрокроЯрпНроЯ родро╛ро╡ро░роЩрпНроХро│рпИ роЙроЯройроЯро┐ропро╛роХ роЕро┤ро┐роХрпНроХро╡рпБроорпН.', 'родроЯрпБрокрпНрокрпБ рокрпВроЮрпНроЪрпИроХрпН роХрпКро▓рпНро▓ро┐ропрпИрокрпН рокропройрпНрокроЯрпБродрпНродрпБроЩрпНроХро│рпН.', 'роЕроЯрпБродрпНрод рокро░рпБро╡родрпНродро┐ро▓рпН роОродро┐ро░рпНрокрпНрокрпБ ро░роХроЩрпНроХро│рпИ роироЯро╡рпБроорпН.']
      : ['Destroy infected plants immediately (do not compost).', 'Apply preventive fungicide.', 'Plant resistant varieties next season.'],
    icon: <Activity className="w-12 h-12 text-rose-600" />
  }
];

const getGuideData = (lang) => [
  {
    title: lang === 'hi' ? "рдкрд╛рдиреА рджреЗрдиреЗ рдХреА рдореВрд▓ рдмрд╛рддреЗрдВ" : lang === 'ta' ? "роирпАро░рпНрокрпНрокро╛роЪрой роЕроЯро┐рокрпНрокроЯрпИроХро│рпН" : "Watering Basics",
    icon: <Droplets className="w-6 h-6 text-blue-500" />,
    content: lang === 'hi' 
      ? "рдЬрд╝реНрдпрд╛рджрд╛рддрд░ рдкреМрдзреЗ рдмрд╛рд░-рдмрд╛рд░ рдереЛрдбрд╝рд╛ рдкрд╛рдиреА рджреЗрдиреЗ рдХреЗ рдмрдЬрд╛рдп рдЧрд╣рд░рд╛, рдХрднреА-рдХрднрд╛рд░ рдкрд╛рдиреА рджреЗрдирд╛ рдкрд╕рдВрдж рдХрд░рддреЗ рд╣реИрдВред рдЕрдкрдиреА рдЙрдВрдЧрд▓реА рдХреЛ рдПрдХ рдЗрдВрдЪ рдЧрд╣рд░рд╛ рдбрд╛рд▓рдХрд░ рдорд┐рдЯреНрдЯреА рдХреА рдирдореА рдХреА рдЬрд╛рдБрдЪ рдХрд░реЗрдВред"
      : lang === 'ta'
      ? "рокрпЖро░рпБроорпНрокро╛ро▓ро╛рой родро╛ро╡ро░роЩрпНроХро│рпН роЕроЯро┐роХрпНроХроЯро┐ ро▓рпЗроЪро╛роХ роирпАро░рпН роКро▒рпНро▒рпБро╡родрпИ ро╡ро┐роЯ роЖро┤рооро╛рой, роОрокрпНрокрпЛродро╛ро╡родрпБ роирпАро░рпН рокро╛ропрпНроЪрпНроЪрпБро╡родрпИ ро╡ро┐ро░рпБроорпНрокрпБроХро┐ройрпНро▒рой. роЙроЩрпНроХро│рпН ро╡ро┐ро░ро▓рпИ роТро░рпБ роЕроЩрпНроХрпБро▓ роЖро┤родрпНродро┐ро▓рпН ро╡рпИродрпНродрпБ роорогрпН роИро░рокрпНрокродродрпНродрпИ роЪро░ро┐рокро╛ро░рпНроХрпНроХро╡рпБроорпН."
      : "Most plants prefer deep, infrequent watering over frequent shallow splashes. Check soil moisture by inserting your finger an inch deep."
  },
  {
    title: lang === 'hi' ? "рдкреНрд░рдХрд╛рд╢ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛рдПрдВ" : lang === 'ta' ? "ро╡ро┐ро│роХрпНроХрпБ родрпЗро╡рпИроХро│рпН" : "Lighting Needs",
    icon: <Sun className="w-6 h-6 text-amber-500" />,
    content: lang === 'hi'
      ? "рдкреВрд░реНрд╡ рдХреА рдУрд░ рд╡рд╛рд▓реА рдЦрд┐рдбрд╝рдХрд┐рдпрд╛рдВ рдХреЛрдорд▓ рд╕реБрдмрд╣ рдХреА рд░реЛрд╢рдиреА рдкреНрд░рджрд╛рди рдХрд░рддреА рд╣реИрдВ, рдЬрдмрдХрд┐ рджрдХреНрд╖рд┐рдг рдХреА рдУрд░ рд╡рд╛рд▓реА рдЦрд┐рдбрд╝рдХрд┐рдпрд╛рдВ рдзреВрдк рдкрд╕рдВрдж рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдкреМрдзреЛрдВ рдХреЗ рд▓рд┐рдП рд╕рдмрд╕реЗ рддреЗрдЬ рддреАрд╡реНрд░рддрд╛ рдкреНрд░рджрд╛рди рдХрд░рддреА рд╣реИрдВред"
      : lang === 'ta'
      ? "роХро┐ро┤роХрпНроХрпБ роирпЛроХрпНроХро┐роп роЬройрпНройро▓рпНроХро│рпН роорпЖройрпНроорпИропро╛рой роХро╛ро▓рпИ роТро│ро┐ропрпИ ро╡ро┤роЩрпНроХрпБроХро┐ройрпНро▒рой, роЕродрпЗ роирпЗро░родрпНродро┐ро▓рпН родрпЖро▒рпНроХрпБ роирпЛроХрпНроХро┐роп роЬройрпНройро▓рпНроХро│рпН роЪрпВро░ро┐ропройрпИ ро╡ро┐ро░рпБроорпНрокрпБроорпН родро╛ро╡ро░роЩрпНроХро│рпБроХрпНроХрпБ ро╡ро▓рпБро╡ро╛рой родрпАро╡ро┐ро░родрпНродрпИ ро╡ро┤роЩрпНроХрпБроХро┐ройрпНро▒рой."
      : "East-facing windows provide gentle morning light, while south-facing windows offer the strongest intensity for sun-loving plants."
  },
  {
    title: lang === 'hi' ? "рдХреАрдЯ рдХреА рд░реЛрдХрдерд╛рдо" : lang === 'ta' ? "рокрпВроЪрпНроЪро┐ родроЯрпБрокрпНрокрпБ" : "Pest Prevention",
    icon: <ShieldCheck className="w-6 h-6 text-emerald-500" />,
    content: lang === 'hi'
      ? "рдирд┐рдпрдорд┐рдд рд░реВрдк рд╕реЗ рдкрддреНрддрд┐рдпреЛрдВ рдХреЗ рдиреАрдЪреЗ рдХреА рддрд░рдл рдирд┐рд░реАрдХреНрд╖рдг рдХрд░реЗрдВред рдкрддреНрддрд┐рдпреЛрдВ рдХреЛ рдЧреАрд▓реЗ рдХрдкрдбрд╝реЗ рд╕реЗ рдкреЛрдВрдЫрдиреЗ рд╕реЗ рдзреВрд▓ рдЬрдорд╛ рд╣реЛрдиреЗ рд╕реЗ рд░реЛрдХрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдФрд░ рдШреБрди рдХреЛ рд╣рддреЛрддреНрд╕рд╛рд╣рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред"
      : lang === 'ta'
      ? "роЗро▓рпИроХро│ро┐ройрпН роЕроЯро┐рокрпНрокроХрпБродро┐ропрпИ родро╡ро▒ро╛рооро▓рпН рокро░ро┐роЪрпЛродро┐роХрпНроХро╡рпБроорпН. роИро░рооро╛рой родрпБрогро┐ропро╛ро▓рпН роЗро▓рпИроХро│рпИродрпН родрпБроЯрпИрокрпНрокродрпБ родрпВроЪро┐ родрпЗроЩрпНроХрпБро╡родрпИродрпН родроЯрпБроХрпНроХрпБроорпН рооро▒рпНро▒рпБроорпН рокрпВроЪрпНроЪро┐роХро│рпИ роКроХрпНроХрокрпНрокроЯрпБродрпНродро╛родрпБ."
      : "Regularly inspect the undersides of leaves. Wiping leaves with a damp cloth can prevent dust buildup and discourage mites."
  }
];

const getGovernmentSchemes = (lang) => [
  {
    id: 1,
    title: lang === 'hi' ? "рдкреАрдПрдо рдлрд╕рд▓ рдмреАрдорд╛ рдпреЛрдЬрдирд╛ (PMFBY)" : lang === 'ta' ? "PM рокропро┐ро░рпН роХро╛рокрпНрокрпАроЯрпНроЯрпБродрпН родро┐роЯрпНроЯроорпН (PMFBY)" : "PM Fasal Bima Yojana (PMFBY)",
    description: lang === 'hi' 
      ? "рдлрд╕рд▓ рдмреАрдорд╛ рдпреЛрдЬрдирд╛ рдЬреЛ рдЕрдкреНрд░рддреНрдпрд╛рд╢рд┐рдд рдШрдЯрдирд╛рдУрдВ рд╕реЗ рдЙрддреНрдкрдиреНрди рдлрд╕рд▓ рд╣рд╛рдирд┐/рдХреНрд╖рддрд┐ рд╕реЗ рдкреАрдбрд╝рд┐рдд рдХрд┐рд╕рд╛рдиреЛрдВ рдХреЛ рд╡рд┐рддреНрддреАрдп рд╕рд╣рд╛рдпрддрд╛ рдкреНрд░рджрд╛рди рдХрд░рддреА рд╣реИред"
      : lang === 'ta'
      ? "роОродро┐ро░рпНрокро╛ро░ро╛род роиро┐роХро┤рпНро╡рпБроХро│ро╛ро▓рпН роПро▒рпНрокроЯрпБроорпН рокропро┐ро░рпН роЗро┤рокрпНрокрпБ/роЪрпЗродродрпНродро╛ро▓рпН рокро╛родро┐роХрпНроХрокрпНрокроЯрпНроЯ ро╡ро┐ро╡роЪро╛ропро┐роХро│рпБроХрпНроХрпБ роиро┐родро┐ропрпБродро╡ро┐ ро╡ро┤роЩрпНроХрпБроорпН рокропро┐ро░рпН роХро╛рокрпНрокрпАроЯрпНроЯрпБродрпН родро┐роЯрпНроЯроорпН."
      : "Crop insurance scheme that provides financial support to farmers suffering crop loss/damage arising out of unforeseen events.",
    icon: <ShieldCheck className="w-6 h-6 text-blue-600" />,
    link: "https://pmfby.gov.in/"
  },
  {
    id: 2,
    title: lang === 'hi' ? "рдкреАрдПрдо-рдХрд┐рд╕рд╛рди рд╕рдореНрдорд╛рди рдирд┐рдзрд┐" : lang === 'ta' ? "PM-роХро┐роЪро╛ройрпН роЪроорпНрооро╛ройрпН роиро┐родро┐" : "PM-Kisan Samman Nidhi",
    description: lang === 'hi'
      ? "рд╕рднреА рднреВрдорд┐рдзрд╛рд░реА рдХрд┐рд╕рд╛рди рдкрд░рд┐рд╡рд╛рд░реЛрдВ рдХреЛ рдкреНрд░рддрд┐ рд╡рд░реНрд╖ тВ╣6,000 рдХреА рдЖрдп рд╕рд╣рд╛рдпрддрд╛, рдЬрд┐рд╕рдХрд╛ рдЙрджреНрджреЗрд╢реНрдп рдХреГрд╖рд┐ рдХреЗ рд▓рд┐рдП рдЗрдирдкреБрдЯ рдЦрд░реАрджрдиреЗ рдореЗрдВ рдорджрдж рдХрд░рдирд╛ рд╣реИред"
      : lang === 'ta'
      ? "роЕройрпИродрпНродрпБ роиро┐ро▓роорпН ро╡рпИродрпНродро┐ро░рпБроХрпНроХрпБроорпН ро╡ро┐ро╡роЪро╛ропроХрпН роХрпБроЯрпБроорпНрокроЩрпНроХро│рпБроХрпНроХрпБроорпН роЖрогрпНроЯрпБроХрпНроХрпБ тВ╣6,000 ро╡ро░рпБрооро╛рой роЖродро░ро╡рпБ."
      : "Income support of тВ╣6,000 per year to all landholding farmer families, aimed at helping you procure inputs for agriculture.",
    icon: <HeartHandshake className="w-6 h-6 text-green-600" />,
    link: "https://pmkisan.gov.in/"
  },
  {
    id: 3,
    title: lang === 'hi' ? "рдХрд┐рд╕рд╛рди рдХреНрд░реЗрдбрд┐рдЯ рдХрд╛рд░реНрдб (KCC)" : lang === 'ta' ? "роХро┐роЪро╛ройрпН роХро┐ро░рпЖроЯро┐роЯрпН роХро╛ро░рпНроЯрпБ (KCC)" : "Kisan Credit Card (KCC)",
    description: lang === 'hi'
      ? "рдЦреЗрддреА рдФрд░ рдЕрдиреНрдп рдЬрд░реВрд░рддреЛрдВ рдХреЗ рд▓рд┐рдП рдмреИрдВрдХрд┐рдВрдЧ рдкреНрд░рдгрд╛рд▓реА рд╕реЗ рдкрд░реНрдпрд╛рдкреНрдд рдФрд░ рд╕рдордп рдкрд░ рдЛрдг рд╕рд╣рд╛рдпрддрд╛ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред"
      : lang === 'ta'
      ? "роЪро╛роХрпБрокроЯро┐ рооро▒рпНро▒рпБроорпН рокро┐ро▒родрпН родрпЗро╡рпИроХро│рпБроХрпНроХрпБ ро╡роЩрпНроХро┐ роЕроорпИрокрпНрокро┐ро▓ро┐ро░рпБроирпНродрпБ рокрпЛродрпБрооро╛рой рооро▒рпНро▒рпБроорпН роЪро░ро┐ропро╛рой роирпЗро░родрпНродро┐ро▓рпН роХроЯройрпН роЖродро░ро╡рпИ ро╡ро┤роЩрпНроХрпБроХро┐ро▒родрпБ."
      : "Provides adequate and timely credit support from the banking system for cultivation and other needs.",
    icon: <Leaf className="w-6 h-6 text-yellow-600" />,
    link: "https://myscheme.gov.in/schemes/kcc"
  }
];

const simulateWeatherAnalysis = () => {
  const forecasts = [
    { type: 'Drought-prone', detail: 'Low rainfall expected next season. Soil moisture critically low.', icon: <Sun className="w-6 h-6 text-orange-500" /> },
    { type: 'Heavy Monsoon', detail: 'Above average rainfall predicted. Risk of water logging.', icon: <CloudRain className="w-6 h-6 text-blue-500" /> },
    { type: 'Normal', detail: 'Favorable conditions with intermittent showers.', icon: <Sprout className="w-6 h-6 text-green-500" /> }
  ];
  return forecasts[Math.floor(Math.random() * forecasts.length)];
};

// --- Translations ---
const TRANSLATIONS = {
  en: {
    appTitle: "Krishi Sahayak",
    heroTitle: "Heal Your Plants",
    heroSubtitle: "With AI Precision",
    heroDesc: "Your personal botanist in your pocket. Instantly identify plant diseases, receive expert treatment plans, and keep your garden thriving with our advanced AI diagnostic tool.",
    startDiag: "Start Diagnosis",
    viewGuides: "View Care Guides",
    kisanSupport: "Kisan Crisis Support",
    instAnalysis: "Instant Analysis",
    instDesc: "Get results in seconds using our rapid scanning technology.",
    expCure: "Expert Cure",
    expDesc: "Receive detailed treatment steps approved by botanists.",
    acc: "98% Accuracy",
    accDesc: "Trusted by thousands of gardeners for reliable results.",
    diagTools: "Diagnostic Tools",
    scanPrompt: "How would you like to scan?",
    uploadImg: "Upload Image",
    uploadDesc: "JPG or PNG supported",
    useCam: "Use Camera",
    camDesc: "Take a photo directly",
    backHome: "Back to Home",
    runDiag: "Run Diagnosis",
    scanning: "Scanning...",
    analyzing: "Analyzing leaf patterns...",
    symptoms: "Symptoms",
    treatment: "Recommended Treatment",
    newScan: "New Scan",
    saveReport: "Save Report",
    savePdf: "Save as PDF",
    saveJpg: "Save as JPG",
    disclaimer: "Disclaimer: AI analysis is for reference only. Consult a specialist for critical crops.",
    camDenied: "Camera Access Denied",
    camDeniedDesc: "We couldn't access your camera. Please allow permission or try uploading a file instead.",
    goBack: "Go Back",
    uploadPhoto: "Upload Photo",
    cancel: "Cancel",
    flip: "Flip",
    careGuide: "Plant Care Guide",
    commonIssues: "Common Issues",
    chatPlaceholder: "Ask about plant care...",
    chatWelcome: "Hello! I'm your plant expert. Ask me anything about your garden!",
    chatOnline: "Online",
    botName: "FloraBot",
    match: "Match",
    generatedBy: "Analysis Report Generated by Krishi Sahayak",
    soilTitle: "Soil Health Lab",
    soilDesc: "Analyze NPK & pH levels for expert crop advice.",
    startSoil: "Test Soil",
    enterSoilDetails: "Enter Soil Details",
    nitrogen: "Nitrogen (N)",
    phosphorus: "Phosphorus (P)",
    potassium: "Potassium (K)",
    phLevel: "pH Level",
    analyzeSoil: "Analyze Soil",
    recCrop: "Recommended Crop",
    recFert: "Recommended Fertilizer",
    results: "Analysis Results",
    listenHeader: "We are here to listen.",
    listenDesc: "Tell us about your crop loss, debt, or weather concerns. We will guide you to the right solution.",
    listening: "Listening...",
    voiceExample: "Example: My cotton crop was destroyed by pests and I have no money for the next season. What should I do?",
    stop: "Stop",
    voice: "Voice",
    gpsLocked: "GPS Locked",
    retry: "Retry",
    autoDetect: "Auto Detect",
    cityPlaceholder: "City/Village Name",
    processing: "Processing...",
    getHelp: "Get Expert Help",
    browseSchemes: "Or browse schemes directly:",
    analyzingSit: "Analyzing Situation...",
    connecting: "Connecting to expert systems...",
    expertGuide: "Expert Guidance",
    weatherAlert: "Weather Alert",
    govtSupport: "Government Support",
    checkElig: "Check Eligibility",
    askAgain: "Ask Another Question",
    backToFlora: "Back to Krishi Sahayak",
    kisanSubtitle: "AI Crisis Support & Expert Guidance for Farmers",
    weatherTitle: "Local Weather & Crops",
    loadingWeather: "Loading local weather...",
    temp: "Temp",
    humidity: "Humidity",
    wind: "Wind",
    suitableCrops: "Suitable Crops for this Season",
    location: "Location",
    detectLoc: "Detect Location",
    manualLoc: "Manual Location",
    search: "Search",
    enterCity: "Enter City Name",
    useGPS: "Use GPS",
    setLocationPrompt: "Set your location to see local crop recommendations",
    sendSms: "Send via SMS",
    nearbySpec: "Nearby Specialists",
    selectSpec: "Select a specialist to message",
    msgPreview: "Message Preview",
    send: "Send Message",
    connectSpec: "Connect with Specialists",
    saveContact: "Save Contact",
    findStore: "Find Stores",
    nearbyServices: "Nearby Agriculture Services",
    usingDefaultLoc: "Using default location. Enable GPS for better results.",
    manualEntry: "Manual Entry",
    enterName: "Specialist Name",
    enterPhone: "Phone Number",
    addManual: "Add Custom Contact",
    backToList: "Back to List"
  },
  hi: {
    appTitle: "рдХреГрд╖рд┐ рд╕рд╣рд╛рдпрдХ",
    heroTitle: "рдЕрдкрдиреЗ рдкреМрдзреЛрдВ рдХреЛ",
    heroSubtitle: "AI рд╕рдЯреАрдХрддрд╛ рдХреЗ рд╕рд╛рде рдареАрдХ рдХрд░реЗрдВ",
    heroDesc: "рдЖрдкрдХреА рдЬреЗрдм рдореЗрдВ рдЖрдкрдХрд╛ рдирд┐рдЬреА рд╡рдирд╕реНрдкрддрд┐рд╢рд╛рд╕реНрддреНрд░реАред рдкреМрдзреЛрдВ рдХреА рдмреАрдорд╛рд░рд┐рдпреЛрдВ рдХреЛ рддреБрд░рдВрдд рдкрд╣рдЪрд╛рдиреЗрдВ, рд╡рд┐рд╢реЗрд╖рдЬреНрдЮ рдЙрдкрдЪрд╛рд░ рдпреЛрдЬрдирд╛рдПрдВ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ, рдФрд░ рд╣рдорд╛рд░реЗ рдЙрдиреНрдирдд AI рдирд┐рджрд╛рди рдЙрдкрдХрд░рдг рдХреЗ рд╕рд╛рде рдЕрдкрдиреЗ рдмрдЧреАрдЪреЗ рдХреЛ рд╣рд░рд╛-рднрд░рд╛ рд░рдЦреЗрдВред",
    startDiag: "рдирд┐рджрд╛рди рд╢реБрд░реВ рдХрд░реЗрдВ",
    viewGuides: "рджреЗрдЦрднрд╛рд▓ рдЧрд╛рдЗрдб рджреЗрдЦреЗрдВ",
    kisanSupport: "рдХрд┐рд╕рд╛рди рд╕рд╣рд╛рдпрддрд╛ (рд╕рдВрдХрдЯ)",
    instAnalysis: "рддреНрд╡рд░рд┐рдд рд╡рд┐рд╢реНрд▓реЗрд╖рдг",
    instDesc: "рд╣рдорд╛рд░реА рддреЗрдЬрд╝ рд╕реНрдХреИрдирд┐рдВрдЧ рддрдХрдиреАрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕реЗрдХрдВрдбреЛрдВ рдореЗрдВ рдкрд░рд┐рдгрд╛рдо рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВред",
    expCure: "рд╡рд┐рд╢реЗрд╖рдЬреНрдЮ рдЗрд▓рд╛рдЬ",
    expDesc: "рд╡рдирд╕реНрдкрддрд┐рд╢рд╛рд╕реНрддреНрд░рд┐рдпреЛрдВ рджреНрд╡рд╛рд░рд╛ рдЕрдиреБрдореЛрджрд┐рдд рд╡рд┐рд╕реНрддреГрдд рдЙрдкрдЪрд╛рд░ рдЪрд░рдг рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВред",
    acc: "98% рд╕рдЯреАрдХрддрд╛",
    accDesc: "рд╡рд┐рд╢реНрд╡рд╕рдиреАрдп рдкрд░рд┐рдгрд╛рдореЛрдВ рдХреЗ рд▓рд┐рдП рд╣рдЬрд╛рд░реЛрдВ рдмрд╛рдЧрд╡рд╛рдиреЛрдВ рджреНрд╡рд╛рд░рд╛ рднрд░реЛрд╕рд╛ рдХрд┐рдпрд╛ рдЧрдпрд╛ред",
    diagTools: "рдирд┐рджрд╛рди рдЙрдкрдХрд░рдг",
    scanPrompt: "рдЖрдк рдХреИрд╕реЗ рд╕реНрдХреИрди рдХрд░рдирд╛ рдЪрд╛рд╣реЗрдВрдЧреЗ?",
    uploadImg: "рдЫрд╡рд┐ рдЕрдкрд▓реЛрдб рдХрд░реЗрдВ",
    uploadDesc: "JPG рдпрд╛ PNG рд╕рдорд░реНрдерд┐рдд",
    useCam: "рдХреИрдорд░рд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ",
    camDesc: "рд╕реАрдзреЗ рдлреЛрдЯреЛ рд▓реЗрдВ",
    backHome: "рдореБрдЦреНрдп рдкреГрд╖реНрда рдкрд░ рд╡рд╛рдкрд╕ рдЬрд╛рдПрдВ",
    runDiag: "рдирд┐рджрд╛рди рдЪрд▓рд╛рдПрдВ",
    scanning: "рд╕реНрдХреИрдирд┐рдВрдЧ...",
    analyzing: "рдкрддреНрддрд┐рдпреЛрдВ рдХреЗ рдкреИрдЯрд░реНрди рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг...",
    symptoms: "рд▓рдХреНрд╖рдг",
    treatment: "рд╕реБрдЭрд╛рдпрд╛ рдЧрдпрд╛ рдЙрдкрдЪрд╛рд░",
    newScan: "рдирдпрд╛ рд╕реНрдХреИрди",
    saveReport: "рд░рд┐рдкреЛрд░реНрдЯ рд╕рд╣реЗрдЬреЗрдВ",
    savePdf: "PDF рдХреЗ рд░реВрдк рдореЗрдВ рд╕рд╣реЗрдЬреЗрдВ",
    saveJpg: "JPG рдХреЗ рд░реВрдк рдореЗрдВ рд╕рд╣реЗрдЬреЗрдВ",
    disclaimer: "рдЕрд╕реНрд╡реАрдХрд░рдг: AI рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХреЗрд╡рд▓ рд╕рдВрджрд░реНрдн рдХреЗ рд▓рд┐рдП рд╣реИред рдорд╣рддреНрд╡рдкреВрд░реНрдг рдлрд╕рд▓реЛрдВ рдХреЗ рд▓рд┐рдП рд╡рд┐рд╢реЗрд╖рдЬреНрдЮ рд╕реЗ рдкрд░рд╛рдорд░реНрд╢ рд▓реЗрдВред",
    camDenied: "рдХреИрдорд░рд╛ рдПрдХреНрд╕реЗрд╕ рдЕрд╕реНрд╡реАрдХреГрдд",
    camDeniedDesc: "рд╣рдо рдЖрдкрдХреЗ рдХреИрдорд░реЗ рддрдХ рдирд╣реАрдВ рдкрд╣реБрдВрдЪ рд╕рдХреЗред рдХреГрдкрдпрд╛ рдЕрдиреБрдорддрд┐ рджреЗрдВ рдпрд╛ рдЗрд╕рдХреЗ рдмрдЬрд╛рдп рдлрд╝рд╛рдЗрд▓ рдЕрдкрд▓реЛрдб рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВред",
    goBack: "рд╡рд╛рдкрд╕ рдЬрд╛рдУ",
    uploadPhoto: "рдлреЛрдЯреЛ рдЕрдкрд▓реЛрдб рдХрд░реЗрдВ",
    cancel: "рд░рджреНрдж рдХрд░реЗрдВ",
    flip: "рдкрд▓рдЯреЗрдВ",
    careGuide: "рдкреМрдзреЛрдВ рдХреА рджреЗрдЦрднрд╛рд▓ рдЧрд╛рдЗрдб",
    commonIssues: "рдЖрдо рд╕рдорд╕реНрдпрд╛рдПрдВ",
    chatPlaceholder: "рдкреМрдзреЛрдВ рдХреА рджреЗрдЦрднрд╛рд▓ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдкреВрдЫреЗрдВ...",
    chatWelcome: "рдирдорд╕реНрддреЗ! рдореИрдВ рдЖрдкрдХрд╛ рдкреМрдзрд╛ рд╡рд┐рд╢реЗрд╖рдЬреНрдЮ рд╣реВрдБред рдЕрдкрдиреЗ рдмрдЧреАрдЪреЗ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдореБрдЭрд╕реЗ рдХреБрдЫ рднреА рдкреВрдЫреЗрдВ!",
    chatOnline: "рдСрдирд▓рд╛рдЗрди",
    botName: "рдлреНрд▓реЛрд░рд╛ рдмреЙрдЯ",
    match: "рдорд┐рд▓рд╛рди",
    generatedBy: "рдХреГрд╖рд┐ рд╕рд╣рд╛рдпрдХ рджреНрд╡рд╛рд░рд╛ рдирд┐рд░реНрдорд┐рдд рд╡рд┐рд╢реНрд▓реЗрд╖рдг рд░рд┐рдкреЛрд░реНрдЯ",
    soilTitle: "рдореГрджрд╛ рд╕реНрд╡рд╛рд╕реНрдереНрдп рдкреНрд░рдпреЛрдЧрд╢рд╛рд▓рд╛",
    soilDesc: "рдлрд╕рд▓ рд╕рд▓рд╛рд╣ рдХреЗ рд▓рд┐рдП NPK рдФрд░ pH рд╕реНрддрд░ рдХреА рдЬрд╛рдБрдЪ рдХрд░реЗрдВред",
    startSoil: "рдорд┐рдЯреНрдЯреА рдХреА рдЬрд╛рдБрдЪ",
    enterSoilDetails: "рдорд┐рдЯреНрдЯреА рдХрд╛ рд╡рд┐рд╡рд░рдг рджрд░реНрдЬ рдХрд░реЗрдВ",
    nitrogen: "рдирд╛рдЗрдЯреНрд░реЛрдЬрди (N)",
    phosphorus: "рдлрд╛рд╕реНрдлреЛрд░рд╕ (P)",
    potassium: "рдкреЛрдЯреЗрд╢рд┐рдпрдо (K)",
    phLevel: "pH рд╕реНрддрд░",
    analyzeSoil: "рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░реЗрдВ",
    recCrop: "рдЕрдиреБрд╢рдВрд╕рд┐рдд рдлрд╕рд▓",
    recFert: "рдЕрдиреБрд╢рдВрд╕рд┐рдд рдЦрд╛рдж",
    results: "рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдкрд░рд┐рдгрд╛рдо",
    listenHeader: "рд╣рдо рдЖрдкрдХреА рдмрд╛рдд рд╕реБрдирдиреЗ рдХреЗ рд▓рд┐рдП рдпрд╣рд╛рдВ рд╣реИрдВред",
    listenDesc: "рд╣рдореЗрдВ рдЕрдкрдиреА рдлрд╕рд▓ рдХреЗ рдиреБрдХрд╕рд╛рди, рдХрд░реНрдЬ рдпрд╛ рдореМрд╕рдо рд╕рдВрдмрдВрдзреА рдЪрд┐рдВрддрд╛рдУрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрддрд╛рдПрдВред рд╣рдо рдЖрдкрдХреЛ рд╕рд╣реА рд╕рдорд╛рдзрд╛рди рддрдХ рдорд╛рд░реНрдЧрджрд░реНрд╢рди рдХрд░реЗрдВрдЧреЗред",
    listening: "рд╕реБрди рд░рд╣рд╛ рд╣реИ...",
    voiceExample: "рдЙрджрд╛рд╣рд░рдг: рдореЗрд░реА рдХрдкрд╛рд╕ рдХреА рдлрд╕рд▓ рдХреАрдЯреЛрдВ рд╕реЗ рдирд╖реНрдЯ рд╣реЛ рдЧрдИ рдФрд░ рдореЗрд░реЗ рдкрд╛рд╕ рдЕрдЧрд▓реЗ рд╕реАрдЬрди рдХреЗ рд▓рд┐рдП рдкреИрд╕реЗ рдирд╣реАрдВ рд╣реИрдВред рдореБрдЭреЗ рдХреНрдпрд╛ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП?",
    stop: "рд░реБрдХреЗрдВ",
    voice: "рдЖрд╡рд╛рдЬрд╝",
    gpsLocked: "GPS рд▓реЙрдХ рдХрд┐рдпрд╛ рдЧрдпрд╛",
    retry: "рдкреБрдирдГ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВ",
    autoDetect: "рд╕реНрд╡рддрдГ рдкрддрд╛ рд▓рдЧрд╛рдПрдВ",
    cityPlaceholder: "рд╢рд╣рд░/рдЧрд╛рдВрд╡ рдХрд╛ рдирд╛рдо",
    processing: "рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдЬрд╛рд░реА рд╣реИ...",
    getHelp: "рд╡рд┐рд╢реЗрд╖рдЬреНрдЮ рд╕рд╣рд╛рдпрддрд╛ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ",
    browseSchemes: "рдпрд╛ рд╕реАрдзреЗ рдпреЛрдЬрдирд╛рдПрдВ рджреЗрдЦреЗрдВ:",
    analyzingSit: "рд╕реНрдерд┐рддрд┐ рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг...",
    connecting: "рд╡рд┐рд╢реЗрд╖рдЬреНрдЮ рдкреНрд░рдгрд╛рд▓рд┐рдпреЛрдВ рд╕реЗ рдЬреБрдбрд╝ рд░рд╣рд╛ рд╣реИ...",
    expertGuide: "рд╡рд┐рд╢реЗрд╖рдЬреНрдЮ рдорд╛рд░реНрдЧрджрд░реНрд╢рди",
    weatherAlert: "рдореМрд╕рдо рдЪреЗрддрд╛рд╡рдиреА",
    govtSupport: "рд╕рд░рдХрд╛рд░реА рд╕рд╣рд╛рдпрддрд╛",
    checkElig: "рдкрд╛рддреНрд░рддрд╛ рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ",
    askAgain: "рджреВрд╕рд░рд╛ рдкреНрд░рд╢реНрди рдкреВрдЫреЗрдВ",
    backToFlora: "рдХреГрд╖рд┐ рд╕рд╣рд╛рдпрдХ рдкрд░ рд╡рд╛рдкрд╕ рдЬрд╛рдПрдВ",
    kisanSubtitle: "рдХрд┐рд╕рд╛рдиреЛрдВ рдХреЗ рд▓рд┐рдП AI рд╕рдВрдХрдЯ рд╕рд╣рд╛рдпрддрд╛ рдФрд░ рд╡рд┐рд╢реЗрд╖рдЬреНрдЮ рдорд╛рд░реНрдЧрджрд░реНрд╢рди",
    weatherTitle: "рд╕реНрдерд╛рдиреАрдп рдореМрд╕рдо рдФрд░ рдлрд╕рд▓реЗрдВ",
    loadingWeather: "рд╕реНрдерд╛рдиреАрдп рдореМрд╕рдо рд▓реЛрдб рд╣реЛ рд░рд╣рд╛ рд╣реИ...",
    temp: "рддрд╛рдкрдорд╛рди",
    humidity: "рдирдореА",
    wind: "рд╣рд╡рд╛",
    suitableCrops: "рдЗрд╕ рдореМрд╕рдо рдХреЗ рд▓рд┐рдП рдЙрдкрдпреБрдХреНрдд рдлрд╕рд▓реЗрдВ",
    location: "рд╕реНрдерд╛рди",
    detectLoc: "рд╕реНрдерд╛рди рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдПрдВ",
    manualLoc: "рдореИрдиреБрдЕрд▓ рд╕реНрдерд╛рди",
    search: "рдЦреЛрдЬреЗрдВ",
    enterCity: "рд╢рд╣рд░ рдХрд╛ рдирд╛рдо рджрд░реНрдЬ рдХрд░реЗрдВ",
    useGPS: "рдЬреАрдкреАрдПрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ",
    setLocationPrompt: "рд╕реНрдерд╛рдиреАрдп рдлрд╕рд▓ рд╕реБрдЭрд╛рд╡ рджреЗрдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдкрдирд╛ рд╕реНрдерд╛рди рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░реЗрдВ",
    sendSms: "SMS рджреНрд╡рд╛рд░рд╛ рднреЗрдЬреЗрдВ",
    nearbySpec: "рдирд┐рдХрдЯрддрдо рд╡рд┐рд╢реЗрд╖рдЬреНрдЮ",
    selectSpec: "рд╕рдВрджреЗрд╢ рднреЗрдЬрдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд╡рд┐рд╢реЗрд╖рдЬреНрдЮ рдЪреБрдиреЗрдВ",
    msgPreview: "рд╕рдВрджреЗрд╢ рдкреВрд░реНрд╡рд╛рд╡рд▓реЛрдХрди",
    send: "рд╕рдВрджреЗрд╢ рднреЗрдЬреЗрдВ",
    connectSpec: "рд╡рд┐рд╢реЗрд╖рдЬреНрдЮреЛрдВ рд╕реЗ рдЬреБрдбрд╝реЗрдВ",
    saveContact: "рд╕рдВрдкрд░реНрдХ рд╕рд╣реЗрдЬреЗрдВ",
    findStore: "рджреБрдХрд╛рдиреЗрдВ рдЦреЛрдЬреЗрдВ",
    nearbyServices: "рдирд┐рдХрдЯрддрдо рдХреГрд╖рд┐ рд╕реЗрд╡рд╛рдПрдВ",
    usingDefaultLoc: "рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд╕реНрдерд╛рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд░рд╣рд╛ рд╣реИред рдмреЗрд╣рддрд░ рдкрд░рд┐рдгрд╛рдореЛрдВ рдХреЗ рд▓рд┐рдП GPS рд╕рдХреНрд╖рдо рдХрд░реЗрдВред",
    manualEntry: "рдореИрдиреБрдЕрд▓ рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐",
    enterName: "рд╡рд┐рд╢реЗрд╖рдЬреНрдЮ рдХрд╛ рдирд╛рдо",
    enterPhone: "рдлрд╝реЛрди рдирдВрдмрд░",
    addManual: "рдХрд╕реНрдЯрдо рд╕рдВрдкрд░реНрдХ рдЬреЛрдбрд╝реЗрдВ",
    backToList: "рд╕реВрдЪреА рдкрд░ рд╡рд╛рдкрд╕ рдЬрд╛рдПрдВ"
  },
  ta: {
    appTitle: "роХро┐ро░рпБро╖ро┐ роЪро╣ро╛ропроХрпН",
    heroTitle: "родро╛ро╡ро░роЩрпНроХро│рпИ",
    heroSubtitle: "AI родрпБро▓рпНро▓ро┐ропродрпНродрпБроЯройрпН роХрпБрогрокрпНрокроЯрпБродрпНродро╡рпБроорпН",
    heroDesc: "роЙроЩрпНроХро│рпН рокро╛роХрпНроХрпЖроЯрпНроЯро┐ро▓рпН роЙроЩрпНроХро│рпН родройро┐рокрпНрокроЯрпНроЯ родро╛ро╡ро░ро╡ро┐ропро▓ро╛ро│ро░рпН. родро╛ро╡ро░ роирпЛропрпНроХро│рпИ роЙроЯройроЯро┐ропро╛роХ роЕроЯрпИропро╛ро│роорпН роХро╛рогро╡рпБроорпН, роиро┐рокрпБрогро░рпН роЪро┐роХро┐роЪрпНроЪрпИ родро┐роЯрпНроЯроЩрпНроХро│рпИрокрпН рокрпЖро▒ро╡рпБроорпН.",
    startDiag: "роХрогрпНроЯро▒ро┐родро▓рпИродрпН родрпКроЯроЩрпНроХро╡рпБроорпН",
    viewGuides: "ро╡ро┤ро┐роХро╛роЯрпНроЯро┐ропрпИрокрпН рокро╛ро░рпНроХрпНроХро╡рпБроорпН",
    kisanSupport: "ро╡ро┐ро╡роЪро╛ропро┐ роЙродро╡ро┐ (роирпЖро░рпБроХрпНроХроЯро┐)",
    instAnalysis: "роЙроЯройроЯро┐ рокроХрпБрокрпНрокро╛ропрпНро╡рпБ",
    instDesc: "роОроЩрпНроХро│рпН ро╡ро┐ро░рпИро╡ро╛рой ро╕рпНроХрпЗройро┐роЩрпН родрпКро┤ро┐ро▓рпНроирпБроЯрпНрокродрпНродрпИрокрпН рокропройрпНрокроЯрпБродрпНродро┐ роирпКроЯро┐роХро│ро┐ро▓рпН роорпБроЯро┐ро╡рпБроХро│рпИрокрпН рокрпЖро▒рпБроЩрпНроХро│рпН.",
    expCure: "роиро┐рокрпБрогро░рпН роЪро┐роХро┐роЪрпНроЪрпИ",
    expDesc: "родро╛ро╡ро░ро╡ро┐ропро▓ро╛ро│ро░рпНроХро│ро╛ро▓рпН роЕроЩрпНроХрпАроХро░ро┐роХрпНроХрокрпНрокроЯрпНроЯ ро╡ро┐ро░ро┐ро╡ро╛рой роЪро┐роХро┐роЪрпНроЪрпИ роорпБро▒рпИроХро│рпИрокрпН рокрпЖро▒рпБроЩрпНроХро│рпН.",
    acc: "98% родрпБро▓рпНро▓ро┐ропроорпН",
    accDesc: "роироорпНрокроХрооро╛рой роорпБроЯро┐ро╡рпБроХро│рпБроХрпНроХро╛роХ роЖропро┐ро░роХрпНроХрогроХрпНроХро╛рой родрпЛроЯрпНроЯроХрпНроХро╛ро░ро░рпНроХро│ро╛ро▓рпН роироорпНрокрокрпНрокроЯрпБроХро┐ро▒родрпБ.",
    diagTools: "роХрогрпНроЯро▒ро┐ропрпБроорпН роХро░рпБро╡ро┐роХро│рпН",
    scanPrompt: "роирпАроЩрпНроХро│рпН роОрокрпНрокроЯро┐ ро╕рпНроХрпЗройрпН роЪрпЖропрпНроп ро╡ро┐ро░рпБроорпНрокрпБроХро┐ро▒рпАро░рпНроХро│рпН?",
    uploadImg: "рокроЯродрпНродрпИрокрпН рокродро┐ро╡рпЗро▒рпНро▒ро╡рпБроорпН",
    uploadDesc: "JPG роЕро▓рпНро▓родрпБ PNG роЖродро░ро┐роХрпНроХрокрпНрокроЯрпБроХро┐ро▒родрпБ",
    useCam: "роХрпЗрооро░ро╛ро╡рпИрокрпН рокропройрпНрокроЯрпБродрпНродро╡рпБроорпН",
    camDesc: "роирпЗро░роЯро┐ропро╛роХ рокрпБроХрпИрокрпНрокроЯроорпН роОроЯрпБроХрпНроХро╡рпБроорпН",
    backHome: "роорпБроХрокрпНрокрпБроХрпНроХрпБродрпН родро┐ро░рпБроорпНрокрпБ",
    runDiag: "роирпЛропрпН роХрогрпНроЯро▒ро┐родро▓рпН",
    scanning: "ро╕рпНроХрпЗройрпН роЪрпЖропрпНроХро┐ро▒родрпБ...",
    analyzing: "роЗро▓рпИ ро╡роЯро┐ро╡роЩрпНроХро│рпИ роЖропрпНро╡рпБ роЪрпЖропрпНроХро┐ро▒родрпБ...",
    symptoms: "роЕро▒ро┐роХрпБро▒ро┐роХро│рпН",
    treatment: "рокро░ро┐роирпНродрпБро░рпИроХрпНроХрокрпНрокроЯрпНроЯ роЪро┐роХро┐роЪрпНроЪрпИ",
    newScan: "рокрпБродро┐роп ро╕рпНроХрпЗройрпН",
    saveReport: "роЕро▒ро┐роХрпНроХрпИропрпИроЪрпН роЪрпЗрооро┐",
    savePdf: "PDF роЖроХ роЪрпЗрооро┐",
    saveJpg: "JPG роЖроХ роЪрпЗрооро┐",
    disclaimer: "рокрпКро▒рпБрокрпНрокрпБродрпН родрпБро▒рокрпНрокрпБ: AI рокроХрпБрокрпНрокро╛ропрпНро╡рпБ роХрпБро▒ро┐рокрпНрокрпБроХрпНроХро╛роХ роороЯрпНроЯрпБроорпЗ. роорпБроХрпНроХро┐ропрооро╛рой рокропро┐ро░рпНроХро│рпБроХрпНроХрпБ роиро┐рокрпБрогро░рпИ роЕрогрпБроХро╡рпБроорпН.",
    camDenied: "роХрпЗрооро░ро╛ роЕройрпБроородро┐ рооро▒рпБроХрпНроХрокрпНрокроЯрпНроЯродрпБ",
    camDeniedDesc: "роОроЩрпНроХро│ро╛ро▓рпН роЙроЩрпНроХро│рпН роХрпЗрооро░ро╛ро╡рпИ роЕрогрпБроХ роорпБроЯро┐ропро╡ро┐ро▓рпНро▓рпИ. роЕройрпБроородро┐ропрпИ ро╡ро┤роЩрпНроХро╡рпБроорпН роЕро▓рпНро▓родрпБ роХрпЛрокрпНрокрпИрокрпН рокродро┐ро╡рпЗро▒рпНро▒ роорпБропро▒рпНроЪро┐роХрпНроХро╡рпБроорпН.",
    goBack: "родро┐ро░рпБроорпНрокро┐роЪрпН роЪрпЖро▓рпН",
    uploadPhoto: "рокрпБроХрпИрокрпНрокроЯродрпНродрпИрокрпН рокродро┐ро╡рпЗро▒рпНро▒ро╡рпБроорпН",
    cancel: "ро░родрпНродрпБроЪрпЖропрпН",
    flip: "родро┐ро░рпБрокрпНрокрпБ",
    careGuide: "родро╛ро╡ро░ рокро░ро╛рооро░ро┐рокрпНрокрпБ ро╡ро┤ро┐роХро╛роЯрпНроЯро┐",
    commonIssues: "рокрпКродрпБро╡ро╛рой роЪро┐роХрпНроХро▓рпНроХро│рпН",
    chatPlaceholder: "родро╛ро╡ро░ рокро░ро╛рооро░ро┐рокрпНрокрпБ рокро▒рпНро▒ро┐ роХрпЗро│рпБроЩрпНроХро│рпН...",
    chatWelcome: "ро╡рогроХрпНроХроорпН! роиро╛ройрпН роЙроЩрпНроХро│рпН родро╛ро╡ро░ роиро┐рокрпБрогро░рпН. роЙроЩрпНроХро│рпН родрпЛроЯрпНроЯродрпНродрпИрокрпН рокро▒рпНро▒ро┐ роОройрпНройро┐роЯроорпН роОродрпИропрпБроорпН роХрпЗро│рпБроЩрпНроХро│рпН!",
    chatOnline: "роЖройрпНро▓рпИройрпН",
    botName: "роГрокрпНро│рпЛро░ро╛ рокро╛роЯрпН",
    match: "рокрпКро░рпБродрпНродроорпН",
    generatedBy: "роХро┐ро░рпБро╖ро┐ роЪро╣ро╛ропроХрпН роорпВро▓роорпН роЙро░рпБро╡ро╛роХрпНроХрокрпНрокроЯрпНроЯ роЕро▒ро┐роХрпНроХрпИ",
    soilTitle: "роорогрпН рокро░ро┐роЪрпЛродройрпИ",
    soilDesc: "рокропро┐ро░рпН роЖро▓рпЛроЪройрпИроХрпНроХрпБ NPK рооро▒рпНро▒рпБроорпН pH роЕро│ро╡рпИ рокроХрпБрокрпНрокро╛ропрпНро╡рпБ роЪрпЖропрпНропрпБроЩрпНроХро│рпН.",
    startSoil: "роорогрпН роЪрпЛродройрпИ",
    enterSoilDetails: "роорогрпН ро╡ро┐ро╡ро░роЩрпНроХро│рпИ роЙро│рпНро│ро┐роЯро╡рпБроорпН",
    nitrogen: "роирпИроЯрпНро░роЬройрпН (N)",
    phosphorus: "рокро╛ро╕рпНрокро░ро╕рпН (P)",
    potassium: "рокрпКроЯрпНроЯро╛роЪро┐ропроорпН (K)",
    phLevel: "pH роиро┐ро▓рпИ",
    analyzeSoil: "рокроХрпБрокрпНрокро╛ропрпНро╡рпБ",
    recCrop: "рокро░ро┐роирпНродрпБро░рпИроХрпНроХрокрпНрокроЯрпНроЯ рокропро┐ро░рпН",
    recFert: "рокро░ро┐роирпНродрпБро░рпИроХрпНроХрокрпНрокроЯрпНроЯ роЙро░роорпН",
    results: "рокроХрпБрокрпНрокро╛ропрпНро╡рпБ роорпБроЯро┐ро╡рпБроХро│рпН",
    listenHeader: "роиро╛роЩрпНроХро│рпН роХрпЗроЯрпНроХ роЗроЩрпНроХрпЗ роЗро░рпБроХрпНроХро┐ро▒рпЛроорпН.",
    listenDesc: "роЙроЩрпНроХро│рпН рокропро┐ро░рпН роЗро┤рокрпНрокрпБ, роХроЯройрпН роЕро▓рпНро▓родрпБ ро╡ро╛ройро┐ро▓рпИ роХро╡ро▓рпИроХро│рпН рокро▒рпНро▒ро┐ роОроЩрпНроХро│ро┐роЯроорпН роХрпВро▒рпБроЩрпНроХро│рпН. роЪро░ро┐ропро╛рой родрпАро░рпНро╡рпБроХрпНроХрпБ роиро╛роЩрпНроХро│рпН роЙроЩрпНроХро│рпБроХрпНроХрпБ ро╡ро┤ро┐роХро╛роЯрпНроЯрпБро╡рпЛроорпН.",
    listening: "роХрпЗроЯрпНроХро┐ро▒родрпБ...",
    voiceExample: "роЙродро╛ро░ро╡роорпН: рокрпВроЪрпНроЪро┐роХро│ро╛ро▓рпН роОройрпН рокро░рпБродрпНродро┐ рокропро┐ро░рпН роЕро┤ро┐роирпНродрпБро╡ро┐роЯрпНроЯродрпБ, роЕроЯрпБродрпНрод рокро░рпБро╡родрпНродро┐ро▒рпНроХрпБ роОройрпНройро┐роЯроорпН рокрогроорпН роЗро▓рпНро▓рпИ. роиро╛ройрпН роОройрпНрой роЪрпЖропрпНроп ро╡рпЗрогрпНроЯрпБроорпН?",
    stop: "роиро┐ро▒рпБродрпНродрпБ",
    voice: "роХрпБро░ро▓рпН",
    gpsLocked: "GPS ро▓ро╛роХрпН роЪрпЖропрпНропрокрпНрокроЯрпНроЯродрпБ",
    retry: "роорпАрогрпНроЯрпБроорпН роорпБропро▓рпНроХ",
    autoDetect: "родро╛ройро╛роХроХрпН роХрогрпНроЯро▒ро┐",
    cityPlaceholder: "роироХро░роорпН/роХро┐ро░ро╛роородрпНродро┐ройрпН рокрпЖропро░рпН",
    processing: "роЪрпЖропро▓ро╛роХрпНроХрпБроХро┐ро▒родрпБ...",
    getHelp: "роиро┐рокрпБрогро░рпН роЙродро╡ро┐ропрпИрокрпН рокрпЖро▒рпБроЩрпНроХро│рпН",
    browseSchemes: "роЕро▓рпНро▓родрпБ родро┐роЯрпНроЯроЩрпНроХро│рпИ роирпЗро░роЯро┐ропро╛роХ роЙро▓ро╛ро╡ро╡рпБроорпН:",
    analyzingSit: "роЪрпВро┤рпНроиро┐ро▓рпИропрпИ рокроХрпБрокрпНрокро╛ропрпНро╡рпБ роЪрпЖропрпНроХро┐ро▒родрпБ...",
    connecting: "роиро┐рокрпБрогро░рпН роЕроорпИрокрпНрокрпБроХро│рпБроЯройрпН роЗрогрпИроХро┐ро▒родрпБ...",
    expertGuide: "роиро┐рокрпБрогро░рпН ро╡ро┤ро┐роХро╛роЯрпНроЯрпБродро▓рпН",
    weatherAlert: "ро╡ро╛ройро┐ро▓рпИ роОроЪрпНроЪро░ро┐роХрпНроХрпИ",
    govtSupport: "роЕро░роЪрпБ роЙродро╡ро┐",
    checkElig: "родроХрпБродро┐ропрпИроЪрпН роЪро░ро┐рокро╛ро░рпНроХрпНроХро╡рпБроорпН",
    askAgain: "рооро▒рпНро▒рпКро░рпБ роХрпЗро│рпНро╡ро┐ропрпИроХрпН роХрпЗро│рпБроЩрпНроХро│рпН",
    backToFlora: "роХро┐ро░рпБро╖ро┐ роЪро╣ро╛ропроХрпН-роХрпНроХрпБродрпН родро┐ро░рпБроорпНрокрпБ",
    kisanSubtitle: "ро╡ро┐ро╡роЪро╛ропро┐роХро│рпБроХрпНроХро╛рой AI роирпЖро░рпБроХрпНроХроЯро┐ роЖродро░ро╡рпБ & роиро┐рокрпБрогро░рпН ро╡ро┤ро┐роХро╛роЯрпНроЯрпБродро▓рпН",
    weatherTitle: "роЙро│рпНро│рпВро░рпН ро╡ро╛ройро┐ро▓рпИ & рокропро┐ро░рпНроХро│рпН",
    loadingWeather: "ро╡ро╛ройро┐ро▓рпИ роПро▒рпНро▒рокрпНрокроЯрпБроХро┐ро▒родрпБ...",
    temp: "ро╡рпЖрокрпНрокроиро┐ро▓рпИ",
    humidity: "роИро░рокрпНрокродроорпН",
    wind: "роХро╛ро▒рпНро▒рпБ",
    suitableCrops: "роЗроирпНрод рокро░рпБро╡родрпНродро┐ро▒рпНроХрпБ роПро▒рпНро▒ рокропро┐ро░рпНроХро│рпН",
    location: "роЗроЯроорпН",
    detectLoc: "роЗро░рпБрокрпНрокро┐роЯродрпНродрпИроХрпН роХрогрпНроЯро▒ро┐",
    manualLoc: "роХрпИроорпБро▒рпИ роЗро░рпБрокрпНрокро┐роЯроорпН",
    search: "родрпЗроЯрпБ",
    enterCity: "роироХро░рокрпН рокрпЖропро░рпИ роЙро│рпНро│ро┐роЯро╡рпБроорпН",
    useGPS: "GPS роРрокрпН рокропройрпНрокроЯрпБродрпНродро╡рпБроорпН",
    setLocationPrompt: "роЙро│рпНро│рпВро░рпН рокропро┐ро░рпН рокро░ро┐роирпНродрпБро░рпИроХро│рпИрокрпН рокро╛ро░рпНроХрпНроХ роЙроЩрпНроХро│рпН роЗро░рпБрокрпНрокро┐роЯродрпНродрпИ роЕроорпИроХрпНроХро╡рпБроорпН",
    sendSms: "SMS роорпВро▓роорпН роЕройрпБрокрпНрокрпБ",
    nearbySpec: "роЕро░рпБроХро┐ро▓рпБро│рпНро│ роиро┐рокрпБрогро░рпНроХро│рпН",
    selectSpec: "роЪрпЖропрпНродро┐ роЕройрпБрокрпНрок роиро┐рокрпБрогро░рпИродрпН родрпЗро░рпНро╡рпБроЪрпЖропрпНроХ",
    msgPreview: "роЪрпЖропрпНродро┐ роорпБройрпНройрпЛроЯрпНроЯроорпН",
    send: "роЪрпЖропрпНродро┐ роЕройрпБрокрпНрокрпБ",
    connectSpec: "роиро┐рокрпБрогро░рпНроХро│рпБроЯройрпН роЗрогрпИроХрпНроХро╡рпБроорпН",
    saveContact: "родрпКроЯро░рпНрокрпИроЪрпН роЪрпЗрооро┐",
    findStore: "роХроЯрпИроХро│рпИроХрпН роХрогрпНроЯро▒ро┐ропро╡рпБроорпН",
    nearbyServices: "роЕро░рпБроХро┐ро▓рпБро│рпНро│ ро╡рпЗро│ро╛рогрпН роЪрпЗро╡рпИроХро│рпН",
    usingDefaultLoc: "роЗропро▓рпНрокрпБроиро┐ро▓рпИ роЗро░рпБрокрпНрокро┐роЯродрпНродрпИрокрпН рокропройрпНрокроЯрпБродрпНродрпБроХро┐ро▒родрпБ. роЪро┐ро▒роирпНрод роорпБроЯро┐ро╡рпБроХро│рпБроХрпНроХрпБ GPS роР роЗропроХрпНроХро╡рпБроорпН.",
    manualEntry: "роХрпИропрпЗроЯрпБ роирпБро┤рпИро╡рпБ",
    enterName: "роиро┐рокрпБрогро░рпН рокрпЖропро░рпН",
    enterPhone: "родрпЖро╛ро▓рпИрокрпЗроЪро┐ роОрогрпН",
    addManual: "родройро┐рокрпНрокропройрпН родрпКроЯро░рпНрокрпИроЪрпН роЪрпЗро░рпН",
    backToList: "рокроЯрпНроЯро┐ропро▓рпБроХрпНроХрпБродрпН родро┐ро░рпБроорпНрокрпБ"
  }
};

// --- Components ---

const LocationMap = ({ lat, lng, className = "" }) => {
  if (!lat || !lng || lat === "Manual" || lat === "Unknown") {
    return (
      <div className={`bg-gray-100 flex items-center justify-center text-gray-400 text-xs ${className}`}>
        <p>Map view unavailable for manual/unknown locations</p>
      </div>
    );
  }

  return (
    <div className={`relative overflow-hidden border border-gray-200 shadow-sm bg-gray-50 ${className}`}>
      <iframe 
        width="100%" 
        height="100%" 
        frameBorder="0" 
        scrolling="no" 
        marginHeight="0" 
        marginWidth="0" 
        src={`https://maps.google.com/maps?q=${lat},${lng}&z=15&output=embed`}
        title="Location Map"
        className="absolute inset-0 w-full h-full"
      />
      <div className="absolute bottom-2 right-2">
        <a 
          href={`https://www.google.com/maps/search/?api=1&query=${lat},${lng}`}
          target="_blank"
          rel="noreferrer"
          className="bg-white/90 backdrop-blur text-blue-600 text-[10px] px-2 py-1 rounded shadow hover:bg-white flex items-center gap-1"
        >
          Open in Maps <ExternalLink className="w-3 h-3" />
        </a>
      </div>
    </div>
  );
};

 const WeatherWidget = ({ language, weather, loading, onActivate }) => {
  const t = TRANSLATIONS[language];

  if (loading) {
    return (
      <div className="w-full max-w-5xl bg-white rounded-2xl p-6 shadow-sm border border-gray-100 flex items-center justify-center gap-2 animate-pulse mb-8 mx-auto">
        <Loader2 className="w-5 h-5 text-emerald-500 animate-spin" />
        <span className="text-gray-500 text-sm">{t.loadingWeather}</span>
      </div>
    );
  }

  if (!weather) {
    return (
      <div 
        onClick={onActivate}
        className="w-full max-w-2xl bg-white rounded-2xl p-6 shadow-sm border border-gray-100 mb-12 mx-auto flex items-center justify-between cursor-pointer hover:border-emerald-300 transition-colors group"
      >
        <div className="flex items-center gap-4">
          <div className="p-3 bg-blue-50 rounded-full text-blue-500 group-hover:bg-blue-100 transition-colors">
            <CloudRain className="w-6 h-6" />
          </div>
          <div>
            <h3 className="font-bold text-gray-800">{t.weatherTitle}</h3>
            <p className="text-xs text-gray-500">{t.setLocationPrompt}</p>
          </div>
        </div>
        <div className="px-4 py-2 bg-emerald-50 text-emerald-700 rounded-lg text-sm font-semibold group-hover:bg-emerald-100 transition-colors">
          {t.detectLoc}
        </div>
      </div>
    );
  }

  return (
    <div className="w-full max-w-2xl bg-gradient-to-br from-blue-50 to-emerald-50 rounded-2xl p-6 shadow-sm border border-blue-100 mb-12 mx-auto">
      <div className="flex items-center gap-2 mb-4">
        <CloudRain className="w-5 h-5 text-blue-500" />
        <h3 className="font-bold text-gray-800">{t.weatherTitle}</h3>
      </div>

      <div className="flex flex-col md:flex-row gap-6">
        {/* Weather Status */}
        <div className="flex-1 bg-white/60 rounded-xl p-4 backdrop-blur-sm">
          <div className="flex items-start justify-between">
            <div>
              <div className="text-4xl font-bold text-gray-900 mb-1">{weather.temp}┬░C</div>
              <div className="text-emerald-700 font-medium">{weather.condition}</div>
            </div>
            {weather.condition === 'Sunny' || weather.condition === 'Clear' ? (
              <Sun className="w-10 h-10 text-orange-400" />
            ) : (
              <Cloud className="w-10 h-10 text-gray-400" />
            )}
          </div>
          <div className="mt-4 flex gap-4 text-xs text-gray-500">
            <div className="flex items-center gap-1">
              <Droplets className="w-3 h-3" /> {t.humidity}: {weather.humidity}%
            </div>
            <div className="flex items-center gap-1">
              <Wind className="w-3 h-3" /> {t.wind}: {weather.wind} km/h
            </div>
          </div>
          <div className="mt-2 text-xs text-gray-400 flex items-center gap-1">
            <MapPin className="w-3 h-3" /> {weather.location}
          </div>
        </div>

        {/* Crop Recommendations */}
        <div className="flex-1">
          <h4 className="text-sm font-bold text-gray-700 mb-3">{t.suitableCrops}</h4>
          <div className="grid grid-cols-3 gap-2">
            {weather.crops.map((crop, idx) => (
              <div key={idx} className="bg-white p-2 rounded-lg text-center shadow-sm border border-gray-100">
                <div className="text-xl mb-1">{crop.icon}</div>
                <div className="text-xs font-medium text-gray-800">
                  {crop.name[language] || crop.name['en']}
                </div>
              </div>
            ))}
          </div>
        </div>
      </div>
    </div>
  );
};

const Navbar = ({ setView, t, setShowLocationMenu, showLocationMenu, loadingWeather, globalLocation, detectLocation, manualLocationQuery, setManualLocationQuery, handleManualSearch, setShowLangMenu, showLangMenu, language, setLanguage }) => (
    <nav className="flex items-center justify-between px-6 py-4 bg-white/80 backdrop-blur-md sticky top-0 z-50 border-b border-emerald-100 print:hidden">
      <div className="flex items-center gap-2 cursor-pointer" onClick={() => setView('landing')}>
        <div className="bg-emerald-600 p-2 rounded-lg">
          <Leaf className="w-5 h-5 text-white" />
        </div>
        <span className="text-xl font-bold text-gray-800 tracking-tight">{t.appTitle}</span>
      </div>
      <div className="flex items-center gap-2">
        <div className="relative">
          <button 
            onClick={() => setShowLocationMenu(!showLocationMenu)}
            className="p-2 hover:bg-gray-100 rounded-full transition-colors text-gray-500 flex items-center gap-1"
            title={t.detectLoc}
          >
            <Crosshair className={`w-5 h-5 ${loadingWeather ? 'animate-spin' : ''}`} />
            <span className="text-xs font-semibold hidden sm:block uppercase max-w-[100px] truncate">
              {loadingWeather ? '...' : (globalLocation ? globalLocation.name.split(',')[0] : t.detectLoc)}
            </span>
          </button>

          {showLocationMenu && (
            <>
              <div 
                className="fixed inset-0 z-10" 
                onClick={() => setShowLocationMenu(false)} 
              />
              <div className="absolute right-0 top-full mt-2 w-72 bg-white rounded-xl shadow-xl border border-gray-100 p-4 z-20 overflow-hidden animate-fade-in">
                <h4 className="text-sm font-bold text-gray-700 mb-3">{t.manualLoc}</h4>
                
                <button 
                  onClick={detectLocation}
                  className="w-full flex items-center justify-center gap-2 py-2 bg-emerald-50 text-emerald-700 rounded-lg hover:bg-emerald-100 transition-colors mb-3 text-sm font-semibold"
                >
                  <Crosshair className="w-4 h-4" />
                  {t.useGPS}
                </button>

                <div className="flex items-center gap-2 mb-2">
                  <div className="h-px bg-gray-200 flex-1"></div>
                  <span className="text-xs text-gray-400">OR</span>
                  <div className="h-px bg-gray-200 flex-1"></div>
                </div>

                <div className="flex gap-2">
                  <input 
                    type="text" 
                    value={manualLocationQuery}
                    onChange={(e) => setManualLocationQuery(e.target.value)}
                    placeholder={t.enterCity}
                    className="flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500"
                    onKeyDown={(e) => e.key === 'Enter' && handleManualSearch(manualLocationQuery)}
                  />
                  <button 
                    onClick={() => handleManualSearch(manualLocationQuery)}
                    disabled={!manualLocationQuery.trim()}
                    className="p-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 disabled:opacity-50 transition-colors"
                  >
                    <Search className="w-4 h-4" />
                  </button>
                </div>
              </div>
            </>
          )}
        </div>

        <div className="relative">
          <button 
            onClick={() => setShowLangMenu(!showLangMenu)}
            className="p-2 hover:bg-gray-100 rounded-full transition-colors text-gray-500 flex items-center gap-1"
          >
            <Globe className="w-5 h-5" />
            <span className="text-xs font-semibold uppercase">{language}</span>
          </button>
          
          {showLangMenu && (
            <>
              <div className="fixed inset-0 z-10" onClick={() => setShowLangMenu(false)} />
              <div className="absolute right-0 top-full mt-2 w-32 bg-white rounded-xl shadow-xl border border-gray-100 py-1 z-20 overflow-hidden animate-fade-in">
                <button onClick={() => { setLanguage('en'); setShowLangMenu(false); }} className={`w-full px-4 py-2 text-left text-sm hover:bg-gray-50 ${language === 'en' ? 'text-emerald-600 font-bold bg-emerald-50' : 'text-gray-700'}`}>English</button>
                <button onClick={() => { setLanguage('hi'); setShowLangMenu(false); }} className={`w-full px-4 py-2 text-left text-sm hover:bg-gray-50 ${language === 'hi' ? 'text-emerald-600 font-bold bg-emerald-50' : 'text-gray-700'}`}>рд╣рд┐рдВрджреА (Hindi)</button>
                <button onClick={() => { setLanguage('ta'); setShowLangMenu(false); }} className={`w-full px-4 py-2 text-left text-sm hover:bg-gray-50 ${language === 'ta' ? 'text-emerald-600 font-bold bg-emerald-50' : 'text-gray-700'}`}>родрооро┐ро┤рпН (Tamil)</button>
              </div>
            </>
          )}
        </div>
        
        <button 
          onClick={() => setView('guide')}
          className="p-2 hover:bg-gray-100 rounded-full transition-colors text-gray-500"
          title={t.viewGuides}
        >
          <BookOpen className="w-5 h-5" />
        </button>
      </div>
    </nav>
);

const ChatWidget = ({ t, language }) => {
    const [isOpen, setIsOpen] = useState(false);
    const [messages, setMessages] = useState([]);
    const [input, setInput] = useState("");
    const messagesEndRef = useRef(null);

    useEffect(() => {
        setMessages([{ id: 1, text: t.chatWelcome, sender: 'ai' }]);
    }, [language]);

    useEffect(() => { if (isOpen) messagesEndRef.current?.scrollIntoView({ behavior: "smooth" }); }, [messages, isOpen]);

    const handleSend = (e) => {
      e.preventDefault();
      if (!input.trim()) return;
      const userMsg = { id: Date.now(), text: input, sender: 'user' };
      setMessages(prev => [...prev, userMsg]);
      setInput("");
      setTimeout(() => {
        let responseText = "";
        if (language === 'hi') responseText = "рдкреМрдзреЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдпрд╣ рдПрдХ рдЕрдЪреНрдЫрд╛ рд╕рд╡рд╛рд▓ рд╣реИ! рдорд┐рдЯреНрдЯреА рдХреА рдирдореА рдФрд░ рд░реЛрд╢рдиреА рдХреА рдЬрд╛рдБрдЪ рдЬрд╝рд░реВрд░ рдХрд░реЗрдВред";
        else if (language === 'ta') responseText = "родро╛ро╡ро░роЩрпНроХро│рпИрокрпН рокро▒рпНро▒ро┐роп роЕро░рпБроорпИропро╛рой роХрпЗро│рпНро╡ро┐! роорогрпН роИро░рокрпНрокродроорпН рооро▒рпНро▒рпБроорпН роТро│ро┐ роиро┐ро▓рпИроХро│рпИ роЪро░ро┐рокро╛ро░рпНроХрпНроХро╡рпБроорпН.";
        else responseText = "That's a great question about plants! Make sure to check the soil moisture and light conditions.";
        
        setMessages(prev => [...prev, { id: Date.now() + 1, text: responseText, sender: 'ai' }]);
      }, 1000);
    };

    return (
      <div className="fixed bottom-6 right-6 z-50 flex flex-col items-end print:hidden">
        {isOpen && (
          <div className="mb-4 w-80 md:w-96 bg-white rounded-2xl shadow-2xl border border-gray-100 overflow-hidden animate-fade-in flex flex-col max-h-[500px]">
            <div className="bg-emerald-600 p-4 flex items-center justify-between text-white">
              <div className="flex items-center gap-2">
                <div className="bg-white/20 p-1.5 rounded-lg"><Bot className="w-5 h-5" /></div>
                <div>
                    <h3 className="font-bold text-sm">{t.botName}</h3>
                    <div className="flex items-center gap-1.5"><span className="w-2 h-2 bg-emerald-300 rounded-full animate-pulse"></span><span className="text-[10px] opacity-90">{t.chatOnline}</span></div>
                </div>
              </div>
              <button onClick={() => setIsOpen(false)} className="p-1 hover:bg-white/20 rounded-full transition-colors"><X className="w-5 h-5" /></button>
            </div>
            <div className="flex-1 overflow-y-auto p-4 bg-gray-50 space-y-4 h-80">
              {messages.map((msg) => (
                <div key={msg.id} className={`flex ${msg.sender === 'user' ? 'justify-end' : 'justify-start'}`}>
                  <div className={`max-w-[80%] p-3 rounded-2xl text-sm ${msg.sender === 'user' ? 'bg-emerald-600 text-white rounded-br-none' : 'bg-white border border-gray-200 text-gray-700 rounded-bl-none shadow-sm'}`}>{msg.text}</div>
                </div>
              ))}
              <div ref={messagesEndRef} />
            </div>
            <form onSubmit={handleSend} className="p-3 bg-white border-t border-gray-100 flex gap-2">
              <input type="text" value={input} onChange={(e) => setInput(e.target.value)} placeholder={t.chatPlaceholder} className="flex-1 bg-gray-100 text-sm rounded-xl px-4 py-2 focus:outline-none focus:ring-2 focus:ring-emerald-500/20" />
              <button type="submit" disabled={!input.trim()} className="bg-emerald-600 text-white p-2.5 rounded-xl hover:bg-emerald-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"><Send className="w-4 h-4" /></button>
            </form>
          </div>
        )}
        <button onClick={() => setIsOpen(!isOpen)} className={`p-4 rounded-full shadow-lg transition-all duration-300 hover:scale-110 active:scale-95 ${isOpen ? 'bg-gray-200 text-gray-600 rotate-90' : 'bg-emerald-600 text-white'}`}>
          {isOpen ? <X className="w-6 h-6" /> : <MessageCircle className="w-6 h-6" />}
        </button>
      </div>
    );
};

// LandingPage Component
const LandingPage = ({ setView, t, setShowLocationMenu, weather, loadingWeather, language }) => (
    <div className="flex flex-col items-center justify-center min-h-[85vh] px-6 text-center animate-fade-in print:hidden">
      <div className="bg-emerald-50 p-6 rounded-full mb-8 animate-bounce-slow ring-1 ring-emerald-100">
        <Sprout className="w-16 h-16 text-emerald-600" />
      </div>
      
      <h1 className="text-4xl md:text-6xl font-extrabold text-gray-900 mb-6 tracking-tight leading-tight">
        {t.heroTitle} <br/>
        <span className="text-emerald-600">{t.heroSubtitle}</span>
      </h1>
      
      <p className="text-lg text-gray-600 max-w-2xl mb-10 leading-relaxed">
        {t.heroDesc}
      </p>

      <div className="flex flex-col md:flex-row gap-4 mb-16 w-full max-w-2xl">
        <button 
          onClick={() => setView('dashboard')}
          className="flex-1 px-4 py-4 bg-emerald-600 text-white font-bold text-lg rounded-2xl shadow-xl shadow-emerald-200 hover:shadow-2xl hover:bg-emerald-700 transition-all hover:-translate-y-1 overflow-hidden group"
        >
          <span className="flex items-center justify-center gap-2">
            {t.startDiag} <ChevronRight className="w-5 h-5 group-hover:translate-x-1 transition-transform" />
          </span>
        </button>
        <button 
          onClick={() => setView('soil-analysis')}
          className="flex-1 px-4 py-4 bg-amber-600 text-white font-bold text-lg rounded-2xl shadow-xl shadow-amber-200 hover:shadow-2xl hover:bg-amber-700 transition-all hover:-translate-y-1 overflow-hidden group"
        >
          <span className="flex items-center justify-center gap-2">
            <Beaker className="w-5 h-5" /> {t.startSoil}
          </span>
        </button>
        <button 
          onClick={() => setView('kisan-sahayak')}
          className="flex-1 px-4 py-4 bg-emerald-900 text-emerald-50 font-bold text-lg rounded-2xl shadow-xl shadow-emerald-900/20 hover:shadow-2xl hover:bg-emerald-800 transition-all hover:-translate-y-1 overflow-hidden"
        >
          <span className="flex items-center justify-center gap-2">
             <HeartHandshake className="w-5 h-5" /> {t.kisanSupport}
          </span>
        </button>
      </div>

      <div className="w-full max-w-2xl mb-8">
        <button 
          onClick={() => setView('map')}
          className="w-full bg-white border border-gray-200 text-emerald-700 font-bold py-3 rounded-xl shadow-sm hover:shadow-md hover:bg-gray-50 transition-all flex items-center justify-center gap-2"
        >
          <MapIcon className="w-5 h-5" /> {t.findStore}
        </button>
      </div>

      <WeatherWidget 
        language={language} 
        weather={weather} 
        loading={loadingWeather} 
        onActivate={() => setShowLocationMenu(true)}
      />
      
      <div className="grid grid-cols-1 md:grid-cols-3 gap-8 w-full max-w-5xl">
        <div className="bg-white p-6 rounded-2xl border border-gray-100 shadow-sm hover:shadow-md transition-shadow">
          <div className="w-12 h-12 bg-blue-50 rounded-xl flex items-center justify-center mb-4 mx-auto text-blue-600"><Scan className="w-6 h-6" /></div>
          <h3 className="text-lg font-bold text-gray-900 mb-2">{t.instAnalysis}</h3>
          <p className="text-sm text-gray-500">{t.instDesc}</p>
        </div>
        <div className="bg-white p-6 rounded-2xl border border-gray-100 shadow-sm hover:shadow-md transition-shadow">
          <div className="w-12 h-12 bg-purple-50 rounded-xl flex items-center justify-center mb-4 mx-auto text-purple-600"><Stethoscope className="w-6 h-6" /></div>
          <h3 className="text-lg font-bold text-gray-900 mb-2">{t.expCure}</h3>
          <p className="text-sm text-gray-500">{t.expDesc}</p>
        </div>
        <div className="bg-white p-6 rounded-2xl border border-gray-100 shadow-sm hover:shadow-md transition-shadow">
          <div className="w-12 h-12 bg-amber-50 rounded-xl flex items-center justify-center mb-4 mx-auto text-amber-600"><CheckCircle className="w-6 h-6" /></div>
          <h3 className="text-lg font-bold text-gray-900 mb-2">{t.acc}</h3>
          <p className="text-sm text-gray-500">{t.accDesc}</p>
        </div>
      </div>
    </div>
);

const Dashboard = ({ setView, t, fileInputRef, handleImageUpload }) => (
    <div className="flex flex-col items-center justify-center pt-12 px-6 animate-fade-in print:hidden">
      <div className="flex items-center gap-2 mb-8 text-gray-400 text-sm font-medium uppercase tracking-wider">
        <div className="h-px w-8 bg-gray-300"></div>{t.diagTools}<div className="h-px w-8 bg-gray-300"></div>
      </div>
      <h2 className="text-2xl md:text-3xl font-bold text-gray-900 mb-8 text-center">{t.scanPrompt}</h2>
      <div className="w-full max-w-md bg-white rounded-3xl shadow-xl border border-gray-100 overflow-hidden">
        <div className="p-8 border-b border-dashed border-gray-200 bg-gray-50/50">
          <div onClick={() => fileInputRef.current?.click()} className="border-2 border-emerald-500 border-dashed rounded-2xl h-48 flex flex-col items-center justify-center cursor-pointer hover:bg-emerald-50 transition-all group bg-white">
            <div className="p-4 bg-emerald-100 rounded-full mb-4 group-hover:scale-110 transition-transform"><Upload className="w-8 h-8 text-emerald-600" /></div>
            <span className="font-bold text-gray-800 text-lg">{t.uploadImg}</span>
            <span className="text-sm text-gray-400 mt-1">{t.uploadDesc}</span>
          </div>
          <input type="file" ref={fileInputRef} onChange={handleImageUpload} accept="image/*" className="hidden" />
        </div>
        <div className="p-6 bg-white">
          <button onClick={() => setView('camera')} className="w-full flex items-center justify-between p-4 rounded-xl hover:bg-gray-50 transition-colors border border-gray-200 group">
            <div className="flex items-center gap-4">
              <div className="p-2 bg-blue-50 text-blue-600 rounded-lg group-hover:bg-blue-100 transition-colors"><Camera className="w-6 h-6" /></div>
              <div className="text-left"><span className="block font-semibold text-gray-800">{t.useCam}</span><span className="text-xs text-gray-500">{t.camDesc}</span></div>
            </div>
            <ChevronRight className="w-5 h-5 text-gray-300 group-hover:text-gray-600" />
          </button>
        </div>
      </div>
      <button onClick={() => setView('landing')} className="mt-12 text-gray-400 hover:text-gray-600 text-sm font-medium flex items-center gap-2 transition-colors"><ArrowLeft className="w-4 h-4" /> {t.backHome}</button>
    </div>
);

const CameraView = ({ setView, t, setSelectedImage }) => {
    const videoRef = useRef(null);
    const canvasRef = useRef(null);
    const [hasPermission, setHasPermission] = useState(null);
    const [facingMode, setFacingMode] = useState('environment');

    useEffect(() => {
      let stream = null;
      const startCamera = async () => {
        try {
          if (videoRef.current && videoRef.current.srcObject) {
            const tracks = videoRef.current.srcObject.getTracks();
            tracks.forEach(track => track.stop());
          }
          stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: facingMode } });
          if (videoRef.current) { videoRef.current.srcObject = stream; setHasPermission(true); }
        } catch (err) { setHasPermission(false); }
      };
      startCamera();
      return () => { if (stream) stream.getTracks().forEach(track => track.stop()); };
    }, [facingMode]);

    const capturePhoto = () => {
      const video = videoRef.current;
      const canvas = canvasRef.current;
      if (video && canvas) {
        const context = canvas.getContext('2d');
        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;
        if (facingMode === 'user') { context.translate(canvas.width, 0); context.scale(-1, 1); }
        context.drawImage(video, 0, 0, canvas.width, canvas.height);
        setSelectedImage(canvas.toDataURL('image/jpeg'));
        setView('analyze');
      }
    };

    if (hasPermission === false) return (
        <div className="flex flex-col items-center justify-center min-h-[60vh] px-6 text-center animate-fade-in">
          <div className="bg-red-100 p-4 rounded-full mb-4"><Camera className="w-8 h-8 text-red-500" /></div>
          <h2 className="text-xl font-bold text-gray-900 mb-2">{t.camDenied}</h2>
          <p className="text-gray-600 mb-6">{t.camDeniedDesc}</p>
          <div className="flex gap-3">
             <button onClick={() => setView('dashboard')} className="px-6 py-2 bg-gray-200 text-gray-700 rounded-xl font-medium">{t.goBack}</button>
          </div>
        </div>
    );

    return (
      <div className="fixed inset-0 bg-black z-50 flex flex-col animate-fade-in">
        <div className="flex-1 relative overflow-hidden flex items-center justify-center">
          <video ref={videoRef} autoPlay playsInline className="absolute min-w-full min-h-full object-cover" style={{ transform: facingMode === 'user' ? 'scaleX(-1)' : 'none' }} />
          <button onClick={() => setView('dashboard')} className="absolute top-6 right-6 p-2 bg-black/40 text-white rounded-full backdrop-blur-md"><X className="w-6 h-6" /></button>
        </div>
        <div className="h-32 bg-black flex items-center justify-center gap-8 pb-6">
           <button onClick={() => setView('dashboard')} className="p-4 text-white/50 hover:text-white transition-colors"><span className="text-xs font-medium">{t.cancel}</span></button>
           <button onClick={capturePhoto} className="w-16 h-16 rounded-full bg-white border-4 border-gray-300 flex items-center justify-center hover:scale-105 active:scale-95 transition-transform"><div className="w-12 h-12 rounded-full bg-emerald-500"></div></button>
           <button onClick={() => setFacingMode(prev => prev === 'environment' ? 'user' : 'environment')} className="p-4 text-white/50 hover:text-white transition-colors flex flex-col items-center gap-1"><RefreshCw className="w-5 h-5" /><span className="text-[10px] font-medium">{t.flip}</span></button>
        </div>
        <canvas ref={canvasRef} className="hidden" />
      </div>
    );
};

const GuideView = ({ setView, t, language }) => (
    <div className="px-6 pb-12 w-full max-w-md mx-auto animate-fade-in">
      <div className="flex items-center gap-2 mb-6 mt-2 print:hidden">
        <button onClick={() => setView('landing')} className="p-2 hover:bg-gray-100 rounded-full"><ArrowLeft className="w-5 h-5 text-gray-600" /></button>
        <h2 className="text-xl font-bold text-gray-900">{t.careGuide}</h2>
      </div>
      <div className="space-y-4">
        {getGuideData(language).map((item, i) => (
          <div key={i} className="bg-white p-5 rounded-2xl shadow-sm border border-gray-100 flex gap-4">
            <div className="shrink-0 w-12 h-12 rounded-full bg-gray-50 flex items-center justify-center">{item.icon}</div>
            <div><h3 className="font-bold text-gray-800 mb-1">{item.title}</h3><p className="text-sm text-gray-600 leading-relaxed">{item.content}</p></div>
          </div>
        ))}
        <div className="mt-8">
           <h3 className="text-lg font-bold text-gray-900 mb-4 px-2">{t.commonIssues}</h3>
           <div className="grid gap-3">
             {getDiseaseDB(language).filter(d => d.id !== 'healthy').map((d, i) => (
               <div key={i} className="bg-white p-4 rounded-xl border border-gray-100 shadow-sm flex items-center gap-3">
                 <div className="p-2 bg-gray-50 rounded-lg">{d.icon}</div>
                 <div className="flex-1"><div className="font-semibold text-gray-800 text-sm">{d.name}</div><div className="text-xs text-gray-500 truncate">{d.symptoms[0]}</div></div>
                 <ChevronRight className="w-4 h-4 text-gray-300" />
               </div>
             ))}
           </div>
        </div>
      </div>
    </div>
);

const AnalyzeView = ({ isAnalyzing, scanProgress, t, selectedImage, resetApp, startAnalysis }) => (
    <div className="flex flex-col items-center justify-center min-h-[80vh] px-6 w-full max-w-md mx-auto animate-fade-in print:hidden">
      <div className="relative w-full aspect-square bg-gray-900 rounded-3xl overflow-hidden shadow-2xl mb-8 group">
        <img src={selectedImage} alt="Analysis" className="w-full h-full object-cover opacity-80" />
        {isAnalyzing && (
          <div className="absolute inset-0 z-10">
            <div className="w-full h-1 bg-gradient-to-r from-transparent via-emerald-400 to-transparent shadow-[0_0_15px_rgba(52,211,153,0.8)] absolute top-0" style={{ top: `${scanProgress}%`, transition: 'top 0.1s linear' }} />
            <div className="absolute top-4 right-4 bg-black/60 backdrop-blur-md px-3 py-1 rounded-full border border-white/10"><span className="text-emerald-400 text-xs font-mono">{t.scanning} {scanProgress}%</span></div>
          </div>
        )}
        {!isAnalyzing && <button onClick={resetApp} className="absolute top-4 right-4 bg-white/20 hover:bg-white/30 backdrop-blur-md p-2 rounded-full text-white transition-colors"><X className="w-5 h-5" /></button>}
      </div>
      {!isAnalyzing ? (
        <button onClick={startAnalysis} className="w-full bg-emerald-600 hover:bg-emerald-700 text-white font-bold py-4 rounded-2xl shadow-lg shadow-emerald-200 transition-all hover:scale-[1.02] flex items-center justify-center gap-2"><Scan className="w-5 h-5" />{t.runDiag}</button>
      ) : (
        <div className="w-full space-y-3">
          <div className="flex justify-between text-sm font-medium text-gray-500"><span>{t.analyzing}</span><span>{scanProgress}%</span></div>
          <div className="h-2 w-full bg-gray-100 rounded-full overflow-hidden"><div className="h-full bg-emerald-500 transition-all duration-300 ease-out" style={{ width: `${scanProgress}%` }} /></div>
        </div>
      )}
    </div>
);

const ResultView = ({ result, selectedImage, t, resetApp, showSaveMenu, setShowSaveMenu, handleDownloadPdf, handleDownloadJpg, setShowSmsModal }) => (
    <div className="px-6 pb-12 w-full max-w-md mx-auto animate-slide-up print:px-0 print:max-w-none print:pb-0">
      <div id="report-container" className="bg-white rounded-3xl shadow-xl border border-gray-100 overflow-hidden mb-6 print:shadow-none print:border-none print:rounded-none">
        <div className={`p-6 flex items-center gap-4 print:border-b print:border-gray-200 ${result.status === 'healthy' ? 'bg-emerald-50' : result.status === 'critical' ? 'bg-rose-50' : 'bg-amber-50'}`}>
          <div className="bg-white p-2 rounded-full shadow-sm print:hidden">{result.icon}</div>
          <div className="w-full">
            <div className="flex justify-between items-start">
               <div>
                  <h2 className="text-xl font-bold text-gray-900">{result.name}</h2>
                  <div className="flex items-center gap-2 mt-1 print:hidden">
                    <div className="h-1.5 w-16 bg-gray-200 rounded-full overflow-hidden"><div className={`h-full rounded-full ${result.status === 'healthy' ? 'bg-emerald-500' : result.status === 'critical' ? 'bg-rose-500' : 'bg-amber-500'}`} style={{ width: `${result.confidence}%` }} /></div>
                    <span className="text-xs font-semibold text-gray-500">{result.confidence}% {t.match}</span>
                  </div>
               </div>
               <img src={selectedImage} className="hidden print:block w-24 h-24 object-cover rounded-lg border border-gray-200" alt="Analyzed Leaf" />
            </div>
            <div className="hidden print:block mt-2 text-xs text-gray-500">{t.generatedBy}</div>
          </div>
        </div>

        <div className="p-6 space-y-6">
          <p className="text-gray-600 leading-relaxed text-sm">{result.description}</p>
          <div><h3 className="text-xs font-bold text-gray-400 uppercase tracking-wider mb-3 flex items-center gap-2"><Activity className="w-3 h-3" /> {t.symptoms}</h3><ul className="space-y-2">{result.symptoms.map((symptom, i) => (<li key={i} className="flex items-start gap-2 text-sm text-gray-700"><span className="mt-1.5 w-1.5 h-1.5 rounded-full bg-emerald-400 shrink-0 print:bg-black" />{symptom}</li>))}</ul></div>
          <div><h3 className="text-xs font-bold text-gray-400 uppercase tracking-wider mb-3 flex items-center gap-2"><ShieldCheck className="w-3 h-3" /> {t.treatment}</h3><div className="bg-gray-50 rounded-xl p-4 border border-gray-100 print:bg-white print:border-none print:p-0"><ul className="space-y-3">{result.treatment.map((step, i) => (<li key={i} className="flex gap-3 text-sm text-gray-700"><span className="flex items-center justify-center w-5 h-5 rounded-full bg-white border border-gray-200 text-xs font-bold text-emerald-600 shrink-0 shadow-sm print:shadow-none print:border-black print:text-black">{i + 1}</span>{step}</li>))}</ul></div></div>
        </div>

        <div className="p-4 bg-gray-50 border-t border-gray-100 flex gap-3 print:hidden no-export">
          <button onClick={resetApp} className="flex-1 bg-white border border-gray-200 text-gray-700 font-semibold py-3 rounded-xl hover:bg-gray-50 transition-colors text-sm">{t.newScan}</button>
          <div className="relative flex-1">
             <button onClick={() => setShowSaveMenu(!showSaveMenu)} className="w-full h-full bg-emerald-600 text-white font-semibold py-3 rounded-xl hover:bg-emerald-700 transition-colors text-sm shadow-md shadow-emerald-200 flex items-center justify-center gap-2"><Download className="w-4 h-4" />{t.saveReport}</button>
              {showSaveMenu && (
                <div className="absolute bottom-full right-0 mb-2 w-48 bg-white rounded-xl shadow-xl border border-gray-100 p-2 animate-fade-in z-20">
                    <button onClick={handleDownloadPdf} className="w-full flex items-center gap-3 px-3 py-2 text-gray-700 hover:bg-gray-50 rounded-lg text-sm font-medium text-left"><FileText className="w-4 h-4 text-rose-500" />{t.savePdf}</button>
                    <button onClick={handleDownloadJpg} className="w-full flex items-center gap-3 px-3 py-2 text-gray-700 hover:bg-gray-50 rounded-lg text-sm font-medium text-left"><ImageIcon className="w-4 h-4 text-blue-500" />{t.saveJpg}</button>
                    <button 
                      onClick={() => { setShowSaveMenu(false); setShowSmsModal(true); }}
                      className="w-full flex items-center gap-3 px-3 py-2 text-gray-700 hover:bg-gray-50 rounded-lg text-sm font-medium text-left border-t border-gray-100"
                    >
                      <MessageSquare className="w-4 h-4 text-emerald-500" />{t.sendSms}
                    </button>
                </div>
              )}
              {showSaveMenu && <div className="fixed inset-0 z-10" onClick={() => setShowSaveMenu(false)}></div>}
          </div>
        </div>
      </div>
      <div className="text-center text-xs text-gray-400 px-8 print:hidden">{t.disclaimer}</div>
    </div>
);

const SmsShareModal = ({ language, result, onClose }) => {
  const t = TRANSLATIONS[language];
  const [selectedSpecialist, setSelectedSpecialist] = useState(null);
  const [viewMode, setViewMode] = useState('list'); // 'list' | 'manual'
  const [manualData, setManualData] = useState({ name: '', phone: '' });

  const handleSendSms = () => {
    let spec = selectedSpecialist;
    if (viewMode === 'manual') {
        if (!manualData.name || !manualData.phone) return;
        spec = { 
            id: 'manual', 
            name: manualData.name, 
            role: 'Custom Contact', 
            phone: manualData.phone 
        };
    }

    if (!spec || !result) return;
    
    // Construct the message body
    const messageBody = `Krishi Sahayak Report:
Disease: ${result.name}
Confidence: ${result.confidence}%
Crop Status: ${result.status}
Please advise on treatment.`;

    const encodedBody = encodeURIComponent(messageBody);
    // Use sms: protocol to open default SMS app
    window.open(`sms:${spec.phone}?body=${encodedBody}`, '_blank');
    onClose();
  };

  const handleSaveContact = (e, spec) => {
    e.stopPropagation(); 
    
    // Create vCard content
    const vCardData = `BEGIN:VCARD
VERSION:3.0
FN:${spec.name}
TEL;TYPE=CELL:${spec.phone}
TITLE:${spec.role}
NOTE:Krishi Sahayak Specialist
END:VCARD`;

    const blob = new Blob([vCardData], { type: 'text/vcard' });
    const url = window.URL.createObjectURL(blob);
    const link = document.createElement('a');
    link.href = url;
    link.setAttribute('download', `${spec.name.replace(/\s+/g, '_')}.vcf`);
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
  };

  return (
    <div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-fade-in">
      <div className="bg-white rounded-2xl w-full max-w-md overflow-hidden shadow-2xl">
        <div className="bg-emerald-600 p-4 flex items-center justify-between text-white">
          <div className="flex items-center gap-2">
            <MessageSquare className="w-5 h-5" />
            <h3 className="font-bold">{t.connectSpec}</h3>
          </div>
          <button onClick={onClose} className="p-1 hover:bg-white/20 rounded-full transition-colors">
            <X className="w-5 h-5" />
          </button>
        </div>
        
        <div className="p-6">
          {viewMode === 'list' ? (
            <>
                <h4 className="font-bold text-gray-800 mb-4 text-sm uppercase tracking-wide text-center">
                    {t.selectSpec}
                </h4>
                
                <div className="space-y-3 mb-6 max-h-60 overflow-y-auto pr-1">
                    {NEARBY_SPECIALISTS.map(spec => (
                    <div 
                        key={spec.id}
                        onClick={() => setSelectedSpecialist(spec)}
                        className={`p-3 rounded-xl border cursor-pointer transition-all flex items-center justify-between ${
                        selectedSpecialist?.id === spec.id 
                            ? 'border-emerald-500 bg-emerald-50 ring-1 ring-emerald-500' 
                            : 'border-gray-200 hover:border-emerald-300 hover:bg-gray-50'
                        }`}
                    >
                        <div className="flex items-center gap-3">
                        <div className={`p-2 rounded-full ${selectedSpecialist?.id === spec.id ? 'bg-emerald-200 text-emerald-700' : 'bg-gray-100 text-gray-500'}`}>
                            <User className="w-5 h-5" />
                        </div>
                        <div>
                            <div className="font-bold text-gray-800 text-sm">{spec.name}</div>
                            <div className="text-xs text-gray-500">{spec.role}</div>
                        </div>
                        </div>
                        <div className="flex items-center gap-2">
                        <div className="flex items-center gap-1 text-xs font-semibold text-emerald-600 bg-emerald-100 px-2 py-1 rounded-full">
                            <MapPin className="w-3 h-3" /> {spec.distance}
                        </div>
                        <button 
                            onClick={(e) => handleSaveContact(e, spec)}
                            className="p-2 bg-emerald-100 text-emerald-700 hover:bg-emerald-200 hover:scale-110 active:scale-95 rounded-full transition-all shadow-sm border border-emerald-200"
                            title={t.saveContact}
                        >
                            <UserPlus className="w-4 h-4" />
                        </button>
                        </div>
                    </div>
                    ))}
                </div>

                <div className="flex gap-2">
                    <button 
                        onClick={() => setViewMode('manual')}
                        className="flex-1 py-3 bg-white border border-gray-200 text-gray-700 rounded-xl font-bold hover:bg-gray-50 transition-colors flex items-center justify-center gap-2 text-sm"
                    >
                        <Plus className="w-4 h-4" /> {t.addManual}
                    </button>
                    <button 
                        onClick={handleSendSms}
                        disabled={!selectedSpecialist}
                        className="flex-1 py-3 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-sm"
                    >
                        <Send className="w-4 h-4" /> {t.send}
                    </button>
                </div>
            </>
          ) : (
            <div className="animate-fade-in">
                <div className="flex items-center justify-between mb-4">
                    <h4 className="font-bold text-gray-800 text-sm uppercase tracking-wide">
                        {t.manualEntry}
                    </h4>
                    <button onClick={() => setViewMode('list')} className="text-xs text-emerald-600 font-semibold hover:underline">
                        {t.backToList}
                    </button>
                </div>

                <div className="space-y-4 mb-6">
                    <div>
                        <label className="block text-xs font-medium text-gray-500 mb-1">{t.enterName}</label>
                        <input 
                            type="text" 
                            className="w-full px-4 py-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-emerald-500"
                            placeholder="e.g. Dr. Amit Sharma"
                            value={manualData.name}
                            onChange={(e) => setManualData({...manualData, name: e.target.value})}
                        />
                    </div>
                    <div>
                        <label className="block text-xs font-medium text-gray-500 mb-1">{t.enterPhone}</label>
                        <input 
                            type="tel" 
                            className="w-full px-4 py-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-emerald-500"
                            placeholder="e.g. 9876543210"
                            value={manualData.phone}
                            onChange={(e) => setManualData({...manualData, phone: e.target.value})}
                        />
                    </div>
                </div>

                <div className="flex gap-2">
                    <button 
                        onClick={() => {
                            if(manualData.name && manualData.phone) {
                                handleSaveContact({ stopPropagation: ()=>{} }, { name: manualData.name, phone: manualData.phone, role: 'Custom Contact' });
                            }
                        }}
                        disabled={!manualData.name || !manualData.phone}
                        className="flex-1 py-3 bg-blue-50 text-blue-700 rounded-xl font-bold hover:bg-blue-100 transition-colors disabled:opacity-50 flex items-center justify-center gap-2 text-sm"
                    >
                        <UserPlus className="w-4 h-4" /> {t.saveContact}
                    </button>
                    <button 
                        onClick={handleSendSms}
                        disabled={!manualData.name || !manualData.phone}
                        className="flex-1 py-3 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 transition-colors disabled:opacity-50 flex items-center justify-center gap-2 text-sm"
                    >
                        <Send className="w-4 h-4" /> {t.send}
                    </button>
                </div>
            </div>
          )}
        </div>
      </div>
    </div>
  );
};

// --- Auth Page Component ---
const AuthPage = ({ onLogin }) => {
  const [formData, setFormData] = useState({
    fullName: '',
    phone: '',
    state: '',
    language: 'Hindi'
  });

  const [submitted, setSubmitted] = useState(false);

  // Using a sample Unsplash image for the background
  const bgImage = "https://images.unsplash.com/photo-1625246333195-78d9c38ad449?q=80&w=2070&auto=format&fit=crop"; 

  const handleInputChange = (e) => {
    const { name, value } = e.target;
    setFormData(prev => ({
      ...prev,
      [name]: value
    }));
  };

  const handleSubmit = (e) => {
    e.preventDefault();
    setSubmitted(true);
    // Simulate generic "offline" save
    setTimeout(() => {
      // alert("Registration Saved Locally! Ready for diagnosis."); // Optional: Use toast instead
      setSubmitted(false);
      onLogin(); // Call the parent function to switch state
    }, 1500);
  };

  return (
    <div className="min-h-screen bg-gray-50 flex items-center justify-center relative overflow-hidden font-sans">
      
      {/* Background Image Area */}
      <div className="absolute inset-0 z-0">
        <img 
          src={bgImage} 
          alt="Farmer in field" 
          className="w-full h-full object-cover"
        />
        {/* Gradient Overlay */}
        <div className="absolute inset-0 bg-gradient-to-r from-emerald-900/90 via-emerald-800/80 to-transparent sm:to-emerald-900/40"></div>
      </div>

      {/* Main Content Container */}
      <div className="relative z-10 w-full max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 flex flex-col md:flex-row items-center justify-between h-full py-8 md:py-0">
        
        {/* Left Side: Value Prop (Visible on Desktop) */}
        <div className="hidden md:block w-full md:w-1/2 text-white pr-12">
          <div className="flex items-center space-x-2 mb-6">
            <div className="p-2 bg-white/20 backdrop-blur-sm rounded-lg">
              <Leaf size={32} className="text-emerald-300" />
            </div>
            <span className="text-sm font-semibold tracking-wider uppercase text-emerald-200">Offline First Technology</span>
          </div>
          
          <h1 className="text-5xl font-bold leading-tight mb-6">
            Instant Crop Diagnosis, <br/>
            <span className="text-emerald-300">No Internet Needed.</span>
          </h1>
          
          <p className="text-xl text-gray-200 mb-8 max-w-lg leading-relaxed">
            Take a photo of any leaf and get expert advice in your local language. 
            Our AI runs directly on your phone to save your yield.
          </p>

          <div className="flex items-center space-x-6 text-sm font-medium text-emerald-100">
            <div className="flex items-center">
              <WifiOff size={20} className="mr-2" />
              Works Offline
            </div>
            <div className="flex items-center">
              <Camera size={20} className="mr-2" />
              Instant Results
            </div>
          </div>
        </div>

        {/* Right Side: Sign Up Card */}
        <div className="w-full md:w-1/2 max-w-md ml-auto">
          <div className="bg-white rounded-2xl shadow-2xl overflow-hidden border border-gray-100">
            
            {/* Mobile Header (Visible only on mobile) */}
            <div className="md:hidden bg-emerald-700 p-6 text-white text-center">
              <Leaf size={40} className="mx-auto mb-2 text-emerald-300" />
              <h2 className="text-2xl font-bold">Krishi Sahayak</h2>
              <p className="text-emerald-100 text-sm mt-1">Crop Health Diagnostic System</p>
            </div>

            <div className="p-8">
              <div className="mb-8 text-center md:text-left">
                <h3 className="text-2xl font-bold text-gray-900 hidden md:block">Get Started</h3>
                <p className="text-gray-500 mt-2">Create your farmer profile to access offline tools.</p>
              </div>

              <form onSubmit={handleSubmit} className="space-y-5">
                
                {/* Language Selector */}
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-1">Preferred Language</label>
                  <div className="relative">
                    <select 
                      name="language"
                      value={formData.language}
                      onChange={handleInputChange}
                      className="w-full pl-4 pr-10 py-3 bg-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 appearance-none text-gray-700 transition-all"
                    >
                      <option>English</option>
                      <option>Hindi (рд╣рд┐рдВрджреА)</option>
                      <option>Marathi (рдорд░рд╛рдареА)</option>
                      <option>Punjabi (рикрй░риЬри╛римрйА)</option>
                      <option>Tamil (родрооро┐ро┤рпН)</option>
                      <option>Telugu (р░др▒Жр░▓р▒Бр░Чр▒Б)</option>
                    </select>
                    <ChevronDown className="absolute right-3 top-3.5 text-gray-400 pointer-events-none" size={18} />
                  </div>
                </div>

                {/* Name Field */}
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-1">Full Name</label>
                  <div className="relative">
                    <div className="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                      <User size={18} className="text-gray-400" />
                    </div>
                    <input
                      type="text"
                      name="fullName"
                      required
                      placeholder="e.g. Rajesh Kumar"
                      className="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-all"
                      value={formData.fullName}
                      onChange={handleInputChange}
                    />
                  </div>
                </div>

                {/* Phone Number */}
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-1">Mobile Number</label>
                  <div className="relative">
                    <div className="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                      <Phone size={18} className="text-gray-400" />
                    </div>
                    <input
                      type="tel"
                      name="phone"
                      required
                      placeholder="98765 43210"
                      pattern="[0-9]{10}"
                      className="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-all"
                      value={formData.phone}
                      onChange={handleInputChange}
                    />
                  </div>
                </div>

                {/* Location (Full Width) */}
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-1">State/Region</label>
                  <div className="relative">
                    <div className="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                      <MapPin size={18} className="text-gray-400" />
                    </div>
                    <input
                      type="text"
                      name="state"
                      placeholder="State"
                      className="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"
                      value={formData.state}
                      onChange={handleInputChange}
                    />
                  </div>
                </div>

                <button
                  type="submit"
                  disabled={submitted}
                  className="w-full flex items-center justify-center py-4 px-4 border border-transparent rounded-lg shadow-sm text-lg font-medium text-white bg-emerald-600 hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 transition-all transform hover:-translate-y-0.5"
                >
                  {submitted ? (
                    <>
                      <CheckCircle className="animate-spin mr-2" size={20} />
                      Setting up Offline Mode...
                    </>
                  ) : (
                    "Sign In"
                  )}
                </button>

                <p className="text-xs text-center text-gray-400 mt-4">
                  By registering, you agree to allow offline storage of crop data on this device.
                </p>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};